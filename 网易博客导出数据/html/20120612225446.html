<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">tomcat axis2 WSDL接口</h2>
	<h5 id="">2012-06-12 22:54:46&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/192856149201251295025715/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">本文u作概述及主要操作,查看源⒖嫉刂<br><a target="_blank" rel="nofollow" href="http://apps.hi.baidu.com/share/detail/63211085"  >http://apps.hi.baidu.com/share/detail/63211085</a><br><wbr><br><pre class="prettyprint"  ><span>#以下大家提供更多的PI字能蛩阉鞯皆},oH意x<br>tomcat 部署 WSDL<br>WSDL hello world F<br></span></pre>下d包axis2的,war部署,bin生成接口java代a wsdl2java.sh<br><div>             <ul id="js_resources_box"  ><li><a target="_blank" rel="nofollow" href="http://115.com/file/e7yx3fd7#axis2-1.6.2-bin.zip"  >http://115.com/file/e7yx3fd7#axis2-1.6.2-bin.zip</a><em></em></li><li><a target="_blank" rel="nofollow" href="http://115.com/file/dp6udlya#axis2-1.6.2-war.zip"  >http://115.com/file/dp6udlya#axis2-1.6.2-war.zip</a></li></ul>         </div>war解旱tomcat的webapps目,L<a target="_blank" rel="nofollow" href="http://localhost:8080/axis2/"  > </a><br><a target="_blank" rel="nofollow" href="http://localhost:8080/axis2/"  >http://localhost:8080/axis2/</a><a rel="nofollow"  ></a><br>能L就正常,然後新建,<br><pre class="prettyprint"  ><p>cd到tomcat/webapps/axis2/WEB-INF目 <br></p><p>mkdir pojo                               #建pojo目</p><p><br></p><p>[root@fedora pojo]# pwd<br>/media/linux/data/opt/tomcat/webapps/axis2/WEB-INF/pojo<br>[root@fedora pojo]# vim SimpleService.java &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #新建SimpleService.java文件</p><p><br>javac SimpleService.java                                                   #javac g成class </p></pre>源代a如下<br><pre class="prettyprint"  ><p>import java.util.Date;<br><br>public class SimpleService<br>{<br>    public String getGreeting(String name)<br>     {<br>     String s="asusお早う 、R鹿野郎！" + name;<br>     System.out.println(name);<br>        return s; <br>     }    <br>    public int getPrice()<br>     {<br>        return new java.util.Random().nextInt(10000);<br>     }    <br>    public String getString(){<br>     <br>     return "俺我倒す!!asas??";<br>    }<br>    public Date getDate(){<br>     System.out.println(new Date());<br>     System.out.println("11111111");<br>     return new Date();<br>    }<br>}<br></p></pre>好了,之後就可以用以下地址y接口吧<br><a target="_blank" rel="nofollow" highlight="" href="http://127.0.0.1:8080/axis2/services/listServices"  >http://127.0.0.1:8080/axis2/services/listServices</a><br><a target="_blank" rel="nofollow" href="http://localhost:8080/axis2/services/SimpleService/getString"  >http://localhost:8080/axis2/services/SimpleService/getString</a><br><a target="_blank" rel="nofollow" href="http://localhost:8080/axis2/services/SimpleService/getGreeting?name=bill"  >http://localhost:8080/axis2/services/SimpleService/getGreeting?name=bill</a><br><a target="_blank" rel="nofollow" href="http://localhost:8080/axis2/services/SimpleService/getPrice"  >http://localhost:8080/axis2/services/SimpleService/getPrice</a><br><a target="_blank" rel="nofollow" href="http://localhost:8080/axis2/services/SimpleService/getDate"  >http://localhost:8080/axis2/services/SimpleService/getDate</a><br><pre class="prettyprint"  ><p><br>g[器是能^看效果了,但是java怎N{用呢,下面得由 wsdl砩成接口<br></p><p>export <span>AXIS2_HOME=</span>/media/linux/data/opt/axis2-1.6.2                 #O置h境量,必的,不然o法正常g,因axis2.sh中用到量</p><br>#在前stub目生成java代a<br><span>$AXIS2_HOME/bin</span>/wsdl2java.sh -uri http://localhost:8080/axis2/services/SimpleService?wsdl -p client -s -o stub &nbsp; &nbsp; &nbsp; &nbsp; <br><br>#/media/linux/data/opt/axis2-1.6.2/lib下的jar包加入CLASSPATH<br>find /media/linux/data/opt/axis2-1.6.2/lib/ -name \*.jar |awk '{print "CLASSPATH=$CLASSPATH"$1":"}' &gt; bash_profile<br><br>#生成文件後修改成如下<br><pre class="prettyprint"  >#生成文件後修改成如下<br>#!/bin/sh &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#自己添加<br>CLASSPATH=$CLASSPATH/media/linux/data/opt/axis2-1.6.2/lib/commons-cli-1.2.jar:<br>CLASSPATH=$CLASSPATH/media/linux/data/opt/axis2-1.6.2/lib/jaxb-impl-2.1.7.jar:<br>.......中g太多,省略吧<br>CLASSPATH=$CLASSPATH/media/linux/data/opt/axis2-1.6.2/lib/activation-1.1.jar:<br>export CLASSPATH &nbsp; &nbsp; #自己添加<br></pre>source bash_profile             #加d文件O置的h境量<br>javac -Xlint -nowarn client/SimpleServiceStub.java      #出Fg警告,不必理,有空可以去google下,多多t解eclipseo法W到的|西<br><br>[fedora@fedora src]$ vim hello.java #源代a如下<br><pre class="prettyprint"  >import java.text.SimpleDateFormat;<br>import java.util.Date;<br>import client.SimpleServiceStub;<br>import client.SimpleServiceStub.GetDate;<br>import client.SimpleServiceStub.GetPrice;<br>import client.SimpleServiceStub.GetString;<br>/**<br> * @author 蒋カイセキ    Japan-Tokyo  平成24年6月12日<br> * @ブログ http://shoukaiseki.blog.163.com/<br> * @E-メ`ル jiang28555@Gmail.com<br> */<br>public class hello {<br> public static void main(String[] args) throws Exception  <br>    {<br>        SimpleServiceStub stub = new SimpleServiceStub();<br>        SimpleServiceStub.GetGreeting gg = new SimpleServiceStub.GetGreeting();<br>        //@方法不一定是@setArgs0,具w查看SimpleServiceStub的子GetGreeting中的方法<br>        gg.setArgs0("Linux Fedora Asus Shoukaiseki");<br>        <br>        System.out.println( stub.getGreeting(gg).get_return());<br>        System.out.println(stub.getPrice(new GetPrice()).get_return());<br>        System.out.println(stub.getString(new GetString()).get_return());<br>        Date da=stub.getDate(new GetDate()).get_return();<br>        SimpleDateFormat bartDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");<br>               <br>        System.out.println(bartDateFormat.format(da));<br>    } <br>}<br></pre> [fedora@fedora src]$ javac hello.java <br>[fedora@fedora src]$ java hello <br>log4j:WARN No appenders could be found for logger (org.apache.axis2.description.AxisOperation).<br>log4j:WARN Please initialize the log4j system properly.<br>asusお早う 、R鹿野郎！Linux Fedora Asus Shoukaiseki<br>4728<br>俺我倒す!!asas??<br>2012-06-12 00:00:00<br></pre>3.Axis2在默认情况下可以热发布WebService，也就是说，将WebService的.class文件复制到pojo目录中时，Tomcat不需要重新启动就可以自动发布WebService。如果想取消Axis2的热发布功能，可以打开&lt;Tomcat安装目录&gt;\webapps\axis2\WEB-INF\conf\axis2.xml，找到如下的配置代码：<br><font color="#0000ff"  >&lt;parameter name="hotdeployment"&gt;true&lt;/parameter&gt;</font><br><br>&nbsp;&nbsp;&nbsp; 将true改为false即可。要注意的是，Axis2在默认情况下虽然是热发布，但并不是热更新，也就是说，一旦成功发布了WebService，再想更新该WebService，就必须重启Tomcat。这对于开发人员调试WebService非常不方便，因此，在开发WebService时，可以将Axis2设为<font color="#ff0000"  >热更新</font>。在axis2.xml文件中找到<font color="#ff0000"  >&lt;parameter name="hotupdate"&gt;false&lt;/parameter&gt;</font>，将false改为true即可。<br><br>4.发布WebService的pojo目录只是默认的，如果读者想在其他的目录发布WebService，可以打开axis2.xml文件，并在&lt;axisconfig&gt;元素中添加如下的子元素：<br>&nbsp;&nbsp;&nbsp; <font color="#333399"  >&lt;deployer extension=".class" directory="my" class="org.apache.axis2.deployment.POJODeployer"/&gt;</font><br><br>&nbsp;&nbsp;&nbsp; 上面的配置允许在&lt;Tomcat安装目录&gt;\webapps\axis2\WEB-INF\my目录中发布WebService。例如，将本例中的SimpleService.class复制到my目录中也可以成功发布（但要删除pojo目录中的SimpleService.class，否则WebService会重名）。<br><br><span></span></div>
	</div>
</div>
</body>
</html>