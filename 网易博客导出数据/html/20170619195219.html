<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">发送邮件</h2>
	<h5 id="">2017-06-19 19:52:19&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/192856149201751975219600/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><pre class="prettyprint"   ><p>package com.tools;<br><br>import java.util.Calendar;<br>import java.util.Properties;<br><br>import javax.mail.Authenticator;<br>import javax.mail.MessagingException;<br>import javax.mail.PasswordAuthentication;<br>import javax.mail.Session;<br>import javax.mail.Transport;<br>import javax.mail.Message.RecipientType;<br>import javax.mail.internet.InternetAddress;<br>import javax.mail.internet.MimeMessage;<br><br>public class SendMail {<br>	@SuppressWarnings("static-access")<br>	public static void sendMessage(String smtpHost, String from,<br>			String fromUserPassword, String to, String subject,<br>			String messageText, String messageType) throws MessagingException {<br>		// 第一步：配置javax.mail.Session对象<br>		System.out.println("为" + smtpHost + "配置mail session对象");<br>		<br>		<br>		Properties props = new Properties();<br>		props.put("mail.pop3.connectiontimeout", "300000");<br>		props.put("mail.pop3.timeout", "300000");<br>		props.put("mail.imap.connectiontimeout", "300000");<br>		props.put("mail.imap.timeout", "300000");<br>		props.put("mail.smtp.connectiontimeout", "300000");<br>		props.put("mail.smtp.timeout", "300000");<br><br>		props.put("mail.smtp.host", smtpHost);<br>		props.put("mail.smtp.starttls.enable","false");//使用 STARTTLS安全连接<br>		props.put("mail.smtp.port", "25");			 //google使用465或587端口<br>		props.put("mail.smtp.auth", "true");		// 使用验证<br>		//props.put("mail.debug", "true");<br>		Session mailSession = Session.getInstance(props,new MyAuthenticator(from,fromUserPassword));<br><br>		// 第二步：编写消息<br>		System.out.println("编写消息from――to:" + from + "――" + to);<br><br>		InternetAddress fromAddress = new InternetAddress(from);<br>		InternetAddress toAddress = new InternetAddress(to);<br><br>		MimeMessage message = new MimeMessage(mailSession);<br>		<br>//		message.setFrom(fromAddress);<br>		message.setFrom(new InternetAddress("黄埔蒋校长&lt;zggmd@tw.com&gt;"));<br><br>		message.addRecipient(RecipientType.TO, toAddress);<br><br>		message.setSentDate(Calendar.getInstance().getTime());<br>		message.setSubject(subject);<br>		message.setContent(messageText, messageType);<br><br>		// 第三步：发送消息<br>		Transport transport = mailSession.getTransport("smtp");<br>		transport.connect(smtpHost,"chaofeng19861126", fromUserPassword);<br>		transport.send(message, message.getRecipients(RecipientType.TO));<br>		System.out.println("message yes");<br>	}<br><br>	public static void main(String[] args) {<br>		try {<br>			String toMail = "";<br>			toMail="jiangasus163@163.com";<br>			String fromMail = "jiangasus@126.com";<br>			String fromPassword = "xxxxxxxx";<br>			<br>			SendMail.sendMessage("smtp.126.com", fromMail,<br>					fromPassword, toMail, "nihao撒旦法放水电费",<br>					"---------------测试邮件发送-----------",<br>					"text/html;charset=utf-8");<br>		} catch (MessagingException e) {<br>			// TODO Auto-generated catch block<br>			e.printStackTrace();<br>		}<br>	}<br>}<br>class MyAuthenticator extends Authenticator{<br>	String userName="";<br>	String password="";<br>	public MyAuthenticator(){<br>		<br>	}<br>	public MyAuthenticator(String userName,String password){<br>		this.userName=userName;<br>		this.password=password;<br>	}<br>	 protected PasswordAuthentication getPasswordAuthentication(){   <br>		return new PasswordAuthentication(userName, password);   <br>	 } <br>}<br></p><div><br></div></pre><br><wbr></div>
	</div>
</div>
</body>
</html>