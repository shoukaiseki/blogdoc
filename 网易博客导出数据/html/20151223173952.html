<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">难找到的提示sql错误</h2>
	<h5 id="">2015-12-23 17:39:52&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/1928561492015112353952519/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>最终根据ROWSTAMP分析,该问题应从于 2015年3月 开始出现</div><div><pre class="prettyprint"   ><p>---找不到sql的提示---{{{1<br>---问题描述---{{{2<br>23 十二月 2015 16:21:12:303 [ERROR] BMXAA6714E - 无法为 SQL 查询 select * from rldhtz  where '5536'  in (select rljsdhtz.rldhtznum from rljsd,rljsdhtz where rljsd.status &lt;&gt; '新建' rljsdhtz.rljsdlx='煤款与运杂费'  and rljsdhtz.rljsdnum=rljsd.rljsdnum and  '5536' =rljsdhtz.rldhtznum) 检索 mboset 中下一条记录的数据。有关错误的更多详细信息，请参阅日志文件。<br><br><br>---问题追踪---{{{2<br>Debug模式下,修改MboSet.getDBValue(String dbFunction, String dbColumn, int maxType)方法<br><br>      if ((correlator != null) &amp;&amp; (logCorrelationIDInSql()))<br>      {<br>        formattedQuery = formattedQuery + " /* " + correlator.getCombinedId() + " */ ";<br>      }<br>	//添加日志输出<br>	  System.out.println("name="+getName());<br>	  System.out.println("getRelationName="+getRelationName());<br>	  System.out.println("getRelationship="+getRelationship());<br>      System.out.println("formattedQuery="+formattedQuery);<br>      <br>      resultset = stmt.executeQuery(formattedQuery);<br><br>---输出内容---{{{3<br>name=DUMMY_TABLE<br>getRelationName=$SqlStmt1450858872222<br>getRelationship= '5536'  in (select rljsdhtz.rldhtznum from rljsd,rljsdhtz where rljsd.status &lt;&gt; '新建' rljsdhtz.rljsdlx='煤款与运杂费'  and rljsdhtz.rljsdnum=rljsd.rljsdnum and  '5536' =rljsdhtz.rldhtznum)<br>formattedQuery=select count(*) from dummy_table  where '5536'  in (select rljsdhtz.rldhtznum from rljsd,rljsdhtz where rljsd.status &lt;&gt; '新建' rljsdhtz.rljsdlx='煤款与运杂费'  and rljsdhtz.rljsdnum=rljsd.rljsdnum and  '5536' =rljsdhtz.rldhtznum)<br><br>---解决方案---{{{2<br>--查询条件表达式 条件名<br>select * from condition where lower(EXPRESSION) like '%rljsd.status%'<br><br>进入应用  条件表达式管理器 修改对应表达式<br><br>---高级功能类---{{{2<br>maxcondition			//条件表达式处理类<br>MaxConditionCache		//实例化条件表达式处理类MaxCondition<br>ParserService			//$SqlStmt 关系在此类创建<br><br>---详细提示---{{{2<br><br>java.sql.SQLSyntaxErrorException: ORA-00907: 缺失右括号<br><br>	at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:91)<br>	at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133)<br>	at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:206)<br>	at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)<br>	at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)<br>	at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1034)<br>	at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:183)<br>	at oracle.jdbc.driver.T4CStatement.executeForDescribe(T4CStatement.java:780)<br>	at oracle.jdbc.driver.T4CStatement.executeMaybeDescribe(T4CStatement.java:855)<br>	at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1187)<br>	at oracle.jdbc.driver.OracleStatement.executeQuery(OracleStatement.java:1378)<br>	at oracle.jdbc.driver.OracleStatementWrapper.executeQuery(OracleStatementWrapper.java:387)<br>	at psdi.mbo.MboSet.getDBValue(MboSet.java:2812)<br>	at psdi.mbo.MboSet.getDBValue(MboSet.java:2717)<br>	at psdi.mbo.MboSet.getDBCalc(MboSet.java:2875)<br>	at psdi.mbo.MboSet.count(MboSet.java:2407)<br>	at psdi.mbo.MboSet.count(MboSet.java:2413)<br>	at psdi.mbo.MboSet.count(MboSet.java:2395)<br>	at psdi.common.parse.ParserService.getBoolean(ParserService.java:193)<br>	at psdi.common.condition.ExpressionCondition.evaluateCondition(ExpressionCondition.java:46)<br>	at psdi.common.condition.MaxCondition.evaluate(MaxCondition.java:131)<br>	at psdi.mbo.Mbo.evaluateCondition(Mbo.java:8076)<br>	at psdi.mbo.Mbo.evaluateCondition(Mbo.java:8091)<br>	at psdi.mbo.Mbo.evaluateRestriction(Mbo.java:5113)<br>	at psdi.mbo.Mbo.andEvaluateConditions(Mbo.java:4268)<br>	at psdi.mbo.Mbo.getAttrRestrictionFlag(Mbo.java:5163)<br>	at psdi.mbo.MboValue.getAttrRestrictionFlag(MboValue.java:2272)<br>	at psdi.mbo.MboValue.isFlagSet(MboValue.java:2369)<br>	at psdi.mbo.MboValue.checkFieldAccess(MboValue.java:2247)<br>	at psdi.mbo.MboValue.isReadOnly(MboValue.java:1753)<br>	at psdi.mbo.MboValueData.&lt;init&gt;(MboValueData.java:98)<br>	at psdi.mbo.MboValueData.&lt;init&gt;(MboValueData.java:80)<br>	at psdi.mbo.MboValue.getMboValueData(MboValue.java:422)<br>	at psdi.mbo.Mbo.getMboValueData(Mbo.java:1193)<br>	at psdi.mbo.Mbo.getMboValueData(Mbo.java:1196)<br>	at psdi.mbo.MboData.&lt;init&gt;(MboData.java:98)<br>	at psdi.mbo.Mbo.getMboData(Mbo.java:1273)<br>	at psdi.mbo.MboSet.getMboData(MboSet.java:607)<br>	at psdi.mbo.MboSet.getMboSetData(MboSet.java:494)<br>	at psdi.webclient.system.beans.DataBean.getMboSetData(DataBean.java:4419)<br>	at psdi.webclient.system.beans.DataBean.fetchTableData(DataBean.java:4337)<br>	at psdi.webclient.system.beans.DataBean.fetchTableData(DataBean.java:4327)<br>	at psdi.webclient.system.beans.DataBean.getPageRowCount(DataBean.java:5277)<br>	at psdi.webclient.controls.Table.render(Table.java:910)<br>	at psdi.webclient.system.controller.ControlInstance.renderChildren(ControlInstance.java:1032)<br>	at psdi.webclient.controls.Tab.renderChildren(Tab.java:107)<br>	at jsp_servlet._webclient._components.__tabbodies._jspService(__tabbodies.java:663)<br></p><div><br></div></pre><br></div></div>
	</div>
</div>
</body>
</html>