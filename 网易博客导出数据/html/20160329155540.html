<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">java 获取IP</h2>
	<h5 id="">2016-03-29 15:55:40&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/192856149201622935540545/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><pre class="prettyprint"   ><p>import java.net.InetAddress;<br>import java.net.NetworkInterface;<br>import java.net.SocketException;<br>import java.net.UnknownHostException;<br>import java.util.Enumeration;<br><br><br>public class ip {<br>	<br>	public static void main(String[] args) throws UnknownHostException {<br>		StringBuilder IFCONFIG=new StringBuilder();  <br>		   try {  <br>		       for (Enumeration&lt;NetworkInterface&gt; en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {  <br>		           NetworkInterface intf = en.nextElement();  <br>		           for (Enumeration&lt;InetAddress&gt; enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {  <br>		               InetAddress inetAddress = enumIpAddr.nextElement();  <br>		               if (!inetAddress.isLoopbackAddress() &amp;&amp; !inetAddress.isLinkLocalAddress() &amp;&amp; inetAddress.isSiteLocalAddress()) {  <br>		               IFCONFIG.append(inetAddress.getHostAddress().toString()+"\n");  <br>		               }  <br>		  <br>		           }  <br>		       }  <br>		   } catch (SocketException ex) {  <br>		   }  <br>		   System.out.println(IFCONFIG); <br>		   <br>		   String ip=java.net.InetAddress.getLocalHost().getHostAddress(); <br>		   System.out.println("ip="+ip);<br>		<br>	}<br><br>}<br></p><div><br></div></pre><br></div><div><a target="_blank" rel="nofollow" href="http://www.iteye.com/problems/88283"   >http://www.iteye.com/problems/88283</a></div><div><div>现在，我们在系统中用InetAddress.getLocalHost().getHostAddress()获取本机的IP地址，之后这个地址要给别人用来访问这台机器。&nbsp;</div><div><br></div><div>可现在的问题是，在有些服务器上，这个方法得到的ip地址是127.0.0.1，但是，大多数服务器，都能够得到真实ip。&nbsp;</div><div><br></div><div>经过比较发现，只要是得到127的地址的，hosts文件的配置都是这样：&nbsp;</div><div>127.0.0.1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; localhost.localdomain localhost&nbsp;</div><div>::1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; localhost6.localdomain6 localhost6&nbsp;</div><div><br></div><div><br></div><div>而正常的服务器的hosts文件是：&nbsp;</div><div>127.0.0.1 &nbsp; &nbsp; &nbsp; localhost.localdomain localhost&nbsp;</div><div>::1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; localhost6.localdomain6 localhost6&nbsp;</div><div>192.167.0.101 &nbsp; NC-PL-DEV011&nbsp;</div><div><br></div><div>所以，现在都是在那些服务器上，设置host name的解析的ip地址。不知道有没有什么办法，可以方便的得到ip地址，而不管服务器的hosts文件的配置。</div></div></div>
	</div>
</div>
</body>
</html>