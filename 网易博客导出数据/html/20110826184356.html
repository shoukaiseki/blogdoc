<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">xphp.exe源码</h2>
	<h5 id="">2011-08-26 18:43:56&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/192856149201172664356312/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><span style="font-family: 'AR PL UKai CN'; line-height: normal; font-size: medium;"  ><div style="font-family: monospace;"  ><pre style="font-family: monospace; color: rgb(248, 248, 242); background-color: rgb(27, 29, 30);"  ><span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  > 1 </span><span style="color: rgb(173, 216, 230);"  >/*</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  > 2 </span><span style="color: rgb(173, 216, 230);"  >*/</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  > 3 </span><span style="color: rgb(166, 226, 46);"  >#include </span><span style="color: rgb(230, 219, 116);"  >&lt;stdlib.h&gt;</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  > 4 </span><span style="color: rgb(166, 226, 46);"  >#include </span><span style="color: rgb(230, 219, 116);"  >&lt;math.h&gt;</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  > 5 </span><span style="color: rgb(166, 226, 46);"  >#include </span><span style="color: rgb(230, 219, 116);"  >"stdio.h"</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  > 6 </span><span style="color: rgb(166, 226, 46);"  >#include </span><span style="color: rgb(230, 219, 116);"  >"conio.h"</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  > 7 </span><span style="color: rgb(102, 217, 239);"  >unsigned</span> <span style="color: rgb(102, 217, 239);"  >long</span> fun();<span style="color: rgb(173, 216, 230);"  >//事先声明fun函数的返回值类型,不然会按系统默认的数据类型返回</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  > 8 </span>main() <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  > 9 </span>{ <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >10 </span>    <span style="color: rgb(102, 217, 239);"  >char</span> a[<span style="color: rgb(174, 129, 255);"  >100</span>]; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >11 </span>    <span style="color: rgb(102, 217, 239);"  >int</span>  i; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >12 </span>    <span style="color: rgb(102, 217, 239);"  >unsigned</span> <span style="color: rgb(102, 217, 239);"  >long</span> d,e=<span style="color: rgb(174, 129, 255);"  >0xFFFFFFFF</span>;<span style="color: rgb(173, 216, 230);"  >//d保存前16位?</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >13 </span>    <span style="color: rgb(173, 216, 230);"  >//printf("%lx",e);</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >14 </span>    printf(<span style="color: rgb(230, 219, 116);"  >"Hello,welcome to PC!</span><span style="color: rgb(249, 38, 114); font-weight: bold;"  >\n</span><span style="color: rgb(230, 219, 116);"  >"</span>); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >15 </span>    printf(<span style="color: rgb(230, 219, 116);"  >"Please enter the calculation of the angle:"</span>); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >16 </span>    enterc(a); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >17 </span>    atooA(a); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >18 </span>    <span style="color: rgb(249, 38, 114); font-weight: bold;"  >for</span>(i=<span style="color: rgb(174, 129, 255);"  >0</span>;a[i]!=<span style="color: rgb(249, 38, 114); font-weight: bold;"  >'\n'</span>;i++) <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >19 </span>    { <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >20 </span>        printf(<span style="color: rgb(230, 219, 116);"  >"</span><span style="color: rgb(249, 38, 114); font-weight: bold;"  >%c</span><span style="color: rgb(230, 219, 116);"  >"</span>,a[i]); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >21 </span>    } <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >22 </span>    d=fun(a); <span style="color: rgb(173, 216, 230);"  >//asus();//</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >23 </span>    <span style="color: rgb(173, 216, 230);"  >//d=0x3FFFFFFF;//</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >24 </span>    printf(<span style="color: rgb(230, 219, 116);"  >"</span><span style="color: rgb(249, 38, 114); font-weight: bold;"  >\n</span><span style="color: rgb(230, 219, 116);"  >Results Decimal is :</span><span style="color: rgb(249, 38, 114); font-weight: bold;"  >%lu</span><span style="color: rgb(230, 219, 116);"  >"</span>,d); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >25 </span>    printf(<span style="color: rgb(230, 219, 116);"  >"</span><span style="color: rgb(249, 38, 114); font-weight: bold;"  >\n</span><span style="color: rgb(230, 219, 116);"  >Results hex(no 0x) is :</span><span style="color: rgb(249, 38, 114); font-weight: bold;"  >%08lx</span><span style="color: rgb(230, 219, 116);"  >"</span>,d); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >26 </span>    printf(<span style="color: rgb(230, 219, 116);"  >"</span><span style="color: rgb(249, 38, 114); font-weight: bold;"  >\n</span><span style="color: rgb(230, 219, 116);"  >Results hex is :0x</span><span style="color: rgb(249, 38, 114); font-weight: bold;"  >%08lx</span><span style="color: rgb(230, 219, 116);"  >"</span>,d); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >27 </span>    printf(<span style="color: rgb(230, 219, 116);"  >"</span><span style="color: rgb(249, 38, 114); font-weight: bold;"  >\n</span><span style="color: rgb(230, 219, 116);"  >Good bye!</span><span style="color: rgb(249, 38, 114); font-weight: bold;"  >\n</span><span style="color: rgb(230, 219, 116);"  >Press any key to off exit!"</span>); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >28 </span>    getch(); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >29 </span>    <span style="color: rgb(249, 38, 114); font-weight: bold;"  >return</span>(<span style="color: rgb(174, 129, 255);"  >0</span>); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >30 </span>} <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >31 </span>enterc(<span style="color: rgb(102, 217, 239);"  >char</span> *p) <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >32 </span>{ <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >33 </span>    <span style="color: rgb(102, 217, 239);"  >int</span> i=<span style="color: rgb(174, 129, 255);"  >0</span>; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >34 </span>    p[i]=getchar(); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >35 </span>    <span style="color: rgb(249, 38, 114); font-weight: bold;"  >for</span>(;p[i]!=<span style="color: rgb(249, 38, 114); font-weight: bold;"  >'\n'</span>;) <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >36 </span>    { <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >37 </span>        i++; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >38 </span>        p[i]=getchar(); <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >39 </span>    } <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >40 </span>    p[i]=<span style="color: rgb(249, 38, 114); font-weight: bold;"  >'\n'</span>; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >41 </span>    <span style="color: rgb(249, 38, 114); font-weight: bold;"  >return</span>; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >42 </span>} <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >43 </span>atooA(<span style="color: rgb(102, 217, 239);"  >char</span> *p) <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >44 </span>{ <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >45 </span>    <span style="color: rgb(102, 217, 239);"  >int</span> i; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >46 </span>    <span style="color: rgb(249, 38, 114); font-weight: bold;"  >for</span>(i=<span style="color: rgb(174, 129, 255);"  >0</span>;p[i]!=<span style="color: rgb(249, 38, 114); font-weight: bold;"  >'\n'</span>;i++) <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >47 </span>    { <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >48 </span>        <span style="color: rgb(249, 38, 114); font-weight: bold;"  >if</span>(p[i]&gt;<span style="color: rgb(174, 129, 255);"  >96</span>&amp;&amp;p[i]&lt;<span style="color: rgb(174, 129, 255);"  >123</span>)<span style="color: rgb(173, 216, 230);"  >//也可以写成if(p[i]&gt;='a'&amp;&amp;p[i]&lt;='z')</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >49 </span>            p[i]-=<span style="color: rgb(174, 129, 255);"  >32</span>; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >50 </span>     } <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >51 </span>} <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >52 </span><span style="color: rgb(102, 217, 239);"  >unsigned</span> <span style="color: rgb(102, 217, 239);"  >long</span> <span style="color: rgb(102, 217, 239);"  >int</span>  fun(<span style="color: rgb(102, 217, 239);"  >char</span> *p) <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >53 </span>{ <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >54 </span>    <span style="color: rgb(102, 217, 239);"  >unsigned</span> <span style="color: rgb(102, 217, 239);"  >long</span> <span style="color: rgb(102, 217, 239);"  >int</span> n,nidrives=<span style="color: rgb(174, 129, 255);"  >0</span>; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >55 </span>    <span style="color: rgb(102, 217, 239);"  >unsigned</span> <span style="color: rgb(102, 217, 239);"  >long</span> <span style="color: rgb(102, 217, 239);"  >int</span>  i,a,j; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >56 </span>    <span style="color: rgb(249, 38, 114); font-weight: bold;"  >for</span>(i=<span style="color: rgb(174, 129, 255);"  >0</span>;p[i]!=<span style="color: rgb(249, 38, 114); font-weight: bold;"  >'\n'</span>;i++) <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >57 </span>    { <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >58 </span>        <span style="color: rgb(249, 38, 114); font-weight: bold;"  >if</span>(p[i]&gt;=<span style="color: rgb(230, 219, 116);"  >'A'</span>&amp;&amp;p[i]&lt;=<span style="color: rgb(230, 219, 116);"  >'Z'</span>) <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >59 </span>            <span style="color: rgb(173, 216, 230);"  >//printf("asus\t");</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >60 </span>            a=p[i]-<span style="color: rgb(174, 129, 255);"  >64</span>;<span style="color: rgb(173, 216, 230);"  >//结果计算2的几次方</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >61 </span>            n=<span style="color: rgb(174, 129, 255);"  >1</span>; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >62 </span>            <span style="color: rgb(249, 38, 114); font-weight: bold;"  >for</span>(j=<span style="color: rgb(174, 129, 255);"  >1</span>;j&lt;a;j++) <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >63 </span>                n*=<span style="color: rgb(174, 129, 255);"  >2</span>; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >64 </span>            <span style="color: rgb(173, 216, 230);"  >//printf("n=%d",n);</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >65 </span>            nidrives|=n; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >66 </span>            <span style="color: rgb(173, 216, 230);"  >//printf("\tnidrives=%d\n",nidrives);</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >67 </span>     } <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >68 </span>     <span style="color: rgb(173, 216, 230);"  >//printf("\nnidrives is :%08lx",nidrives);</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >69 </span>     <span style="color: rgb(249, 38, 114); font-weight: bold;"  >return</span> nidrives; <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >70 </span>     <span style="color: rgb(173, 216, 230);"  >//return (0x12345678);</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >71 </span>} <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >72 </span>asus(){<span style="color: rgb(249, 38, 114); font-weight: bold;"  >return</span> (<span style="color: rgb(174, 129, 255);"  >0x12345678</span>);} <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >73 </span><span style="color: rgb(173, 216, 230);"  >/*</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >74 </span><span style="color: rgb(173, 216, 230);"  >碰到问题:   for(i=0;p[i]!='\n';i++)中的'\n'的n后面多加了个空格('\n '),进入死循环</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >75 </span><span style="color: rgb(173, 216, 230);"  >十六进制输出0填充问题,原先printf("\nResults hex is :0x%8lx",d);前面空格填充了,</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >76 </span><span style="color: rgb(173, 216, 230);"  >加个0就好了(%08lx)</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >77 </span><span style="color: rgb(173, 216, 230);"  >输出无printf("%x",0xFFFFFFFF);结果是FFFF,加个l("%lx") 就好了</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >78 </span><span style="color: rgb(173, 216, 230);"  >fun(char *p)的返回值没有32位(最大值返回16位),但是在return nidrives;前面输出地正常</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >79 </span><span style="color: rgb(173, 216, 230);"  >在24行前加个d=0x3FFFFFFF;能成功输出</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >80 </span><span style="color: rgb(173, 216, 230);"  >原因是加了第7行就问题解决了</span> <span style="color: rgb(188, 188, 188); background-color: rgb(35, 37, 38);"  >81 </span><span style="color: rgb(173, 216, 230);"  >*/</span></pre></div></span><font color="#0082cb"  face="Arial"  ><span style="font-size: 12px; line-height: 24px;"  >好像163的博客行数多了就自动删除回车了</span></font><br><div><span style="color: rgb(0, 130, 203); font-family: Arial; font-size: 12px; line-height: 24px;"  >换行方式请查阅</span></div><div><span style="font-family: Arial;"  ><a target="_blank" rel="nofollow" href="http://hi.baidu.com/jiangxinyi21/blog/item/02af0477f53d091328388acb.html"  ><font color="#ff6600"  size="5"  >http://hi.baidu.com/jiangxinyi21/blog/item/02af0477f53d091328388acb.html</font></a><div style="color: rgb(0, 130, 203); font-size: 12px;"  ><span style="line-height: 24px;"  ><br></span></div></span><wbr></div></div>
	</div>
</div>
</body>
</html>