<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Linux：yum（添加/删除/更新RPM包）的详细使用方法</h2>
	<h5 id="">2011-12-17 23:07:53&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/1928561492011111711753680/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><span style="color: rgb(51, 51, 51); font-family: Arial, Console, Verdana, 'Courier New'; font-size: 12px; line-height: normal;"  ><div id="article_content"  style="margin-top: 20px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font-family: 'Courier New', Console, Verdana, 微软雅黑; font: normal normal normal 14px/26px Arial;"  ><div><h2 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >yum是什么</h2><ul><li>yum = Yellow dog Updater, Modified</li><li>主要功能是更方便的添加/删除/更新RPM包.</li><li>它能自动解决包的倚赖性问题.</li><li>它能便于管理大量系统的更新问题</li></ul><h2 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >yum特点</h2><ul><li>可以同时配置多个资源库(Repository)</li><li>简洁的配置文件(/etc/yum.conf</li><li>自动解决增加或删除rpm包时遇到的倚赖性问题</li><li>使用方便</li><li>保持与RPM数据库的一致性</li></ul><h2 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >yum安装</h2><ul><li>CentOS自带(yum-*.noarch.rpm)</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#rpm -ivh yum-*.noarch.rpm</pre><ul><li>在第一次启用yum之前首先需要导入系统的RPM-GPG-KEY：</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#rpm --import /usr/share/doc/centos-release-3(4)/RPM-GPG-KEY-CentOS-3(4)</pre><h2 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >yum指令</h2><ul><li>注:当第一次使用yum或yum资源库有更新时,yum会自动下载所有所需的headers放置于/var/cache/yum目录下,所需时间可能较长.</li></ul><h3 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >rpm包的更新</h3><ul><li>检查可更新的rpm包</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum check-update</pre><ul><li>更新所有的rpm包</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum update</pre><ul><li>更新指定的rpm包,如更新kernel和kernel source</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum update kernel kernel-source</pre><ul><li>大规模的版本升级,与yum update不同的是,连旧的淘汰的包也升级</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum upgrade</pre><h3 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >rpm包的安装和删除</h3><ul><li>安装rpm包,如xmms-mp3</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum install xmms-mp3</pre><ul><li>删除rpm包,包括与该包有倚赖性的包</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum remove licq</pre><ul><li>注:同时会提示删除licq-gnome,licq-qt,licq-text</li></ul><h3 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >yum暂存(/var/cache/yum/)的相关参数</h3><ul><li>清除暂存中rpm包文件</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum clean packages</pre><ul><li>清除暂存中rpm头文件</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum clearn headers</pre><ul><li>清除暂存中旧的rpm头文件</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum clean oldheaders</pre><ul><li>清除暂存中旧的rpm头文件和包文件</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum clearn 或#yum clearn all</pre><ul><li>注:相当于yum clean packages + yum clean oldheaders</li></ul><h3 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >包列表</h3><ul><li>列出资源库中所有可以安装或更新的rpm包</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum list</pre><ul><li>列出资源库中特定的可以安装或更新以及已经安装的rpm包</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum list mozilla<br>#yum list mozilla*</pre><ul><li>注:可以在rpm包名中使用匹配符,如列出所有以mozilla开头的rpm包</li></ul><ul><li>列出资源库中所有可以更新的rpm包</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum list updates</pre><ul><li>列出已经安装的所有的rpm包</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum list installed</pre><ul><li>列出已经安装的但是不包含在资源库中的rpm包</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum list extras</pre><ul><li>注:通过其它网站下载安装的rpm包</li></ul><h3 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >rpm包信息显示(info参数同list)</h3><ul><li>列出资源库中所有可以安装或更新的rpm包的信息</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum info</pre><ul><li>列出资源库中特定的可以安装或更新以及已经安装的rpm包的信息</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum info mozilla<br>#yum info mozilla*</pre><ul><li>注:可以在rpm包名中使用匹配符,如列出所有以mozilla开头的rpm包的信息</li></ul><ul><li>列出资源库中所有可以更新的rpm包的信息</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum info updates</pre><ul><li>列出已经安装的所有的rpm包的信息</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum info installed</pre><ul><li>列出已经安装的但是不包含在资源库中的rpm包的信息</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum info extras</pre><ul><li>注:通过其它网站下载安装的rpm包的信息</li></ul><h3 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >搜索rpm包</h3><ul><li>搜索匹配特定字符的rpm包</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum search mozilla</pre><ul><li>注:在rpm包名,包描述等中搜索</li></ul><ul><li>搜索有包含特定文件名的rpm包</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#yum provides realplay</pre><h2 style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"  >增加资源库</h2><ul><li>例如:增加rpm.livna.org作为资源库</li></ul><ul><li>安装Livna.org rpms GPG key</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#rpm --import&nbsp;<a style="color: rgb(51, 102, 153); text-decoration: none; " rel="nofollow" href="http://rpm.livna.org/RPM-LIVNA-GPG-KEY"  >http://rpm.livna.org/RPM-LIVNA-GPG-KEY</a></pre><ul><li>检查GPG Key</li></ul><pre style="word-wrap: break-word; white-space: normal;"  ># rpm -qa gpg-pubkey*</pre><ul><li>显示Key信息</li></ul><pre style="word-wrap: break-word; white-space: normal;"  >#rpm -qi gpg-pubkey-a109b1ec-3f6e28d5</pre><ul><li>(注:如果要删除Key,使用#rpm -e gpg-pubkey-a109b1ec-3f6e28d5)</li></ul><p><span style="font-size: large;"  ><strong>添加yum源</strong></span></p><p>添加yum源，可以都放在 /etc/yum.repos.d/ 目录下，一个源一个文件，后缀是repo就可以了。系统本身有两个文件，都是国外的源，比较慢，可以把他们备份，使用国内的源来更新。</p><p>这些源互相的差别</p><p>单独使用中科大的更新源：是2658个包</p><p>单独使用freshrpms，是514个包。</p><p>单独rpmforge，是4471个包</p><p>那么如果我使用3个源（不包括rpmforge），是2822个包，其中dvd是1784个包。freshrpms是164，其他就是从中科大下载的。</p><p>所有可以看出来yum还是很聪明的，自动本地的是最快的，</p><p>刚刚又添加了一个rpmforge源，这个源太厉害了，一下子就多了3979个包。这可不是全部啊，这是别的没有，就他有的包啊。</p><p>现在我的机器了可以更新的包是6668个包。</p><p>rpmforge，这个太牛了，昨天研究pxe安装xp，需要安装cabextract，我到处搜索找这个包都没有找到，最后在cu上找到一个源码包，编译安装，搞了半天才搞定，没有想到，现在我直接yum就搞定了。</p><p>rpmforge，这个源的包基本都是独有的，</p><p>还有一点就是需要注意的，rhms，一个redhat的邮件解决方案，把把所有需要用到的rpm包下载到本地，再通过yum来安装。非常方便。</p><p>六：各种源</p><p>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.save</p><p>mv /etc/yum.repos.d/CentOS-Media.repo /etc/yum.repos.d/CentOS-Media.repo.save</p><p>1：使用本地光驱</p><p>mkdir /mnt/dvd</p><p>mount /dev/cdrom /mnt/dvd</p><p>创建 dvdiso.repo 文件，添加下面内容。</p><p>vi /etc/yum.repos.d/dvdiso.repo</p><p>[DVDISO]</p><p>name=DVD ISO</p><p>baseurl=file:///mnt/dvd</p><p>enabled=1</p><p>gpgcheck=0</p><p>2：使用中科大的源</p><p>创建ustc.repo 文件</p><p>######################</p><p>[base]</p><p>name=CentOS-5 - Base</p><p>repo=os</p><p>baseurl=http://centos.ustc.edu.cn/centos/5.2/os/$basearch/</p><p>gpgcheck=1</p><p>gpgkey=http://centos.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-5</p><p>[update]</p><p>name=CentOS-5 - Updates</p><p>baseurl=http://centos.ustc.edu.cn/centos/5.2/updates/$basearch/</p><p>gpgcheck=1</p><p>gpgkey=http://centos.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-5</p><p>[addons]</p><p>name=CentOS-5 - Addons</p><p>baseurl=http://centos.ustc.edu.cn/centos/5.2/addons/$basearch/</p><p>gpgcheck=1</p><p>gpgkey=http://centos.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-5</p><p>[extras]</p><p>name=CentOS-5 - Extras</p><p>baseurl=http://centos.ustc.edu.cn/centos/5.2/extras/$basearch/</p><p>gpgcheck=1</p><p>gpgkey=http://centos.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-5</p><p>[centosplus]</p><p>name=CentOS-5 - Plus</p><p>baseurl=http://centos.ustc.edu.cn/centos/5.2/centosplus/$basearch/</p><p>gpgcheck=1</p><p>enabled=0</p><p>gpgkey=http://centos.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-5</p><p>[contrib]</p><p>name=CentOS-5 - Contrib</p><p>baseurl=http://centos.ustc.edu.cn/centos/5.2/contrib/$basearch/</p><p>gpgcheck=1</p><p>enabled=0</p><p>gpgkey=http://centos.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-5</p><p>###################</p><p>rpm --import&nbsp;<a style="color: rgb(51, 102, 153); text-decoration: none; " rel="nofollow" href="http://centos.ustc.edu.cn/centos/5.2/os/i386/RPM-GPG-KEY-CentOS-5"  >http://centos.ustc.edu.cn/centos/5.2/os/i386/RPM-GPG-KEY-CentOS-5</a></p><p>使用freshrpms源</p><p>创建 freshrpms.repo 文件</p><p>[freshrpms]</p><p>name=Fedora Linux $releasever - $basearch - freshrpms</p><p>baseurl=http://ayo.freshrpms.net/fedora/linux/$releasever/$basearch/freshrpms</p><p>gpgcheck=1</p><p>rpm --import&nbsp;<a style="color: rgb(51, 102, 153); text-decoration: none; " rel="nofollow" href="http://freshrpms.net/packages/RPM-GPG-KEY.txt"  >http://freshrpms.net/packages/RPM-GPG-KEY.txt</a></p><p>使用rpmforge一个源</p><p>wget http://dag.wieers.com/rpm/packages/rpmforge-release/rpmforge-release-0.3.6-1.el5.rf.i386.rpm</p><p>rpm -Uvh rpmforge-release-0.3.6-1.el5.rf.i386.rpm</p><p>下面这个源，可以安装webmin，创建/etc/yum.repos.d/Doylenet.repo</p><p>[doylenet]</p><p>name=Doylenet custom repository for CentOS</p><p>baseurl=http://files.doylenet.net/linux/yum/centos/5/i386/doylenet/</p><p>gpgcheck=1</p><p>gpgkey=http://files.doylenet.net/linux/yum/centos/RPM-GPG-KEY-rdoyle</p><p>enabled=1</p><p>yum install webmin</p></div></div><div id="sharePanel"  style="float: right; width: 170px; margin-top: 5px; margin-right: 0px; margin-bottom: 5px; margin-left: 0px; font: normal normal normal 12px/24px Arial, Helvetica, sans-serif; text-align: right;"  ><span style="display: inline-block; line-height: 30px; font-weight: bold; color: green; vertical-align: middle;"  >分享到：</span>&nbsp;<a title="&#20998;&#20139;&#21040;&#26032;&#28010;&#24494;&#21338;" style="color: rgb(51, 102, 153); text-decoration: none; background-image: url(http://static.blog.csdn.net/images/ico_sina.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; display: inline-block; width: 25px; height: 30px; cursor: pointer; vertical-align: middle; background-position: 0px 5px; background-repeat: no-repeat no-repeat; " name="sina" rel="nofollow"  ></a><a title="&#20998;&#20139;&#21040;&#33150;&#35759;&#24494;&#21338;" style="color: rgb(51, 102, 153); text-decoration: none; background-image: url(http://static.blog.csdn.net/images/ico_qq.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; display: inline-block; width: 25px; height: 30px; cursor: pointer; vertical-align: middle; background-position: 0px 5px; background-repeat: no-repeat no-repeat; " name="qq" rel="nofollow"  ></a></div><div><br></div><div style="display: block; color: rgb(102, 102, 102); font: normal normal normal 12px/24px Arial, Helvetica, sans-serif;"  ></div></span><wbr></div>
	</div>
</div>
</body>
</html>