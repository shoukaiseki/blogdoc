<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">vim高级匹配</h2>
	<h5 id="">2015-12-08 15:49:14&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/192856149201511834528181/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">\v[\u4e00-\u9fa5]<span style="white-space:pre;"   >				</span>"匹配中文<wbr><div><span style="line-height: 28px;"   >\v[\u4e00-\u9fa5]{10,}</span><span style="line-height: 28px; white-space: pre;"   >			</span><span style="line-height: 28px;"   >"</span><span style="line-height: 28px;"   >匹配中文字数连续超过10个以上的</span></div><div><span style="line-height: 28px;"   ><br></span></div><div><span style="line-height: 28px;"   ><br></span></div><div><span style="line-height: 28px;"   ><br></span></div><div><span style="line-height: 28px;"   ><br></span></div><div><span style="line-height: 28px;"   ><br></span></div><div><span style="line-height: 28px;"   ><br></span></div><div><span style="line-height: 28px;"   >以下内容转至&nbsp;</span>http://www.cnblogs.com/penseur/archive/2011/02/25/1964522.html</div><div><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >毋庸多言，在vim中正则表达式得到了十分广泛的应用。 最常用的 / 和 :s 命令中，正则表达式都是不可或缺的。 下面对vim中的正则表达式的一些难点进行说明。</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >关于magic</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >vim中有个magic的设定。设定方法为：</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >:set magic " 设置magic :set nomagic " 取消magic :h magic " 查看帮助</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >vim毕竟是个编辑器，正则表达式中包含的大量元字符如果原封不动地引用（像perl 那样）， 势必会给不懂正则表达式的人造成麻烦，比如 /foo(1) 命令， 大多数人都用它来查找foo(1)这个字符串， 但如果按照正则表达式来解释，被查找的对象就成了 foo1 了。</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >于是，vim就规定，正则表达式的元字符必须用反斜杠进行转义才行， 如上面的例子，如果确实要用正则表达式，就应当写成 /foo\(1\) 。 但是，像 . * 这种极其常用的元字符，都加上反斜杠就太麻烦了。 而且，众口难调，有些人喜欢用正则表达式，有些人不喜欢用……</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >为了解决这个问题，vim设置了 magic 这个东西。简单地说， magic就是设置哪些元字符要加反斜杠哪些不用加的。 简单来说：</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   ><strong style="margin: 0px; padding: 0px;"   >magic</strong>&nbsp;(\m)：除了 $ . * ^ 之外其他元字符都要加反斜杠。<strong style="margin: 0px; padding: 0px;"   >nomagic</strong>&nbsp;(\M)：除了 $ ^ 之外其他元字符都要加反斜杠。</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >这个设置也可以在正则表达式中通过 \m \M 开关临时切换。 \m 后面的正则表达式会按照 magic 处理，\M 后面的正则表达式按照 nomagic 处理， 而忽略实际的magic设置。</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >例如：</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >/\m.* # 查找任意字符串 /\M.* # 查找字符串 .* （点号后面跟个星号）</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >另外还有更强大的 \v 和 \V。</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   ><strong style="margin: 0px; padding: 0px;"   >\v</strong>&nbsp;（即 very magic 之意）：任何元字符都不用加反斜杠<strong style="margin: 0px; padding: 0px;"   >\V</strong>&nbsp;（即 very nomagic 之意）：任何元字符都必须加反斜杠</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >例如：</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >/\v(a.c){3}$ # 查找行尾的abcaccadc /\m(a.c){3}$ # 查找行尾的(abc){3} /\M(a.c){3}$ # 查找行尾的(a.c){3} /\V(a.c){3}$ # 查找任意位置的(a.c){3}$</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >默认设置是 magic，vim也推荐大家都使用magic的设置，在有特殊需要时，直接通过 \v\m\M\V 即可。</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >本文下面使用的元字符都是 magic 模式下的。</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >量词</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >vim的量词与perl相比一点也不逊色。</p><div style="margin: 0px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 19.5px; background-color: rgb(254, 254, 242);"   ><table border="1"   cellspacing="1"   style="margin: 0px; padding: 0px; border: 1px solid silver; border-collapse: collapse; word-break: break-word;"   ><tbody style="margin: 0px; padding: 0px;"   ><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >vim</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >Perl</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >意义</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >*</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >*</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >0个或多个(匹配优先)</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\+</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >+</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >1个或多个(匹配优先)</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\? 或 \=</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >?</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >0个或1个(匹配优先)，\?不能在 ? 命令（逆向查找）中使用</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\{n,m}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >{n,m}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >n个到m个(匹配优先)</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\{n,}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >{n,}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >最少n个(匹配优先)</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\{,m}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >{,m}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >最多m个(匹配优先)</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\{n}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >{n}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >恰好n个</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\{-n,m}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >{n,m}?</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >n个到m个(忽略优先)</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\{-}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >*?</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >0个或多个(忽略优先)</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\{-1,}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >+?</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >1个或多个(忽略优先)</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\{-,1}</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >??</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >0个或1个(忽略优先)</td></tr></table></div><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >从上表中可见，vim的忽略优先量词不像perl的 *? +? ?? 那样，而是统一使用 \{- 实现的。 这大概跟忽略优先量词不常用有关吧。</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >环视和固化分组</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >vim居然还支持环视和固化分组的功能，强大，赞一个&nbsp; 关于环视的解释请参考Yurii的<a style="margin: 0px; padding: 0px; color: rgb(125, 0, 0);" rel="nofollow" href="http://www.douban.com/subject/2154713/"   >《精通正则表达式》</a>&nbsp;一书吧。</p><div style="margin: 0px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 19.5px; background-color: rgb(254, 254, 242);"   ><table border="1"   cellspacing="1"   style="margin: 0px; padding: 0px; border: 1px solid silver; border-collapse: collapse; word-break: break-word;"   ><tbody style="margin: 0px; padding: 0px;"   ><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >vim</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >Perl</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >意义</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\@=</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >(?=</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >顺序环视</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\@!</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >(?!</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >顺序否定环视</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\@&lt;=</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >(?&lt;=</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >逆序环视</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\@&lt;!</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >(?&lt;!</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >逆序否定环视</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\@&gt;</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >(?&gt;</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >固化分组</td></tr><tr style="margin: 0px; padding: 0px;"   ><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >\%(atom\)</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >(?:</td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse; font-size: 1em;"   >非捕获型括号</td></tr></table></div><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   >和perl稍有不同的是，vim中的环视和固化分组的模式的位置与perl不同。 例如，查找紧跟在 foo 之后的 bar，perl将模式写在环视的括号内， 而vim将模式写在环视的元字符之前。</p><p style="margin-right: auto; margin-left: auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);"   ># Perl的写法 /(?&lt;=foo)bar/ # vim的写法 /\(foo\)\@&lt;=barvim正则表达式 写道<br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   >元字符 说明<br style="margin: 0px; padding: 0px;"   >. 匹配任意一个字符<br style="margin: 0px; padding: 0px;"   >[abc] 匹配方括号中的任意一个字符。可以使用-表示字符范围，<br style="margin: 0px; padding: 0px;"   >如[a-z0-9]匹配小写字母和阿拉伯数字。<br style="margin: 0px; padding: 0px;"   >[^abc] 在方括号内开头使用^符号，表示匹配除方括号中字符之外的任意字符。<br style="margin: 0px; padding: 0px;"   >\d 匹配阿拉伯数字，等同于[0-9]。<br style="margin: 0px; padding: 0px;"   >\D 匹配阿拉伯数字之外的任意字符，等同于[^0-9]。<br style="margin: 0px; padding: 0px;"   >\x 匹配十六进制数字，等同于[0-9A-Fa-f]。<br style="margin: 0px; padding: 0px;"   >\X 匹配十六进制数字，等同于[^0-9A-Fa-f]。<br style="margin: 0px; padding: 0px;"   >\w 匹配单词字母，等同于[0-9A-Za-z_]。<br style="margin: 0px; padding: 0px;"   >\W 匹配单词字母之外的任意字符，等同于[^0-9A-Za-z_]。<br style="margin: 0px; padding: 0px;"   >\t 匹配&lt;TAB&gt;字符。<br style="margin: 0px; padding: 0px;"   >\s 匹配空白字符，等同于[ \t]。<br style="margin: 0px; padding: 0px;"   >\S 匹配非空白字符，等同于[^ \t]。<br style="margin: 0px; padding: 0px;"   >\a 所有的字母字符. 等同于[a-zA-Z]<br style="margin: 0px; padding: 0px;"   >\l 小写字母 [a-z]<br style="margin: 0px; padding: 0px;"   >\L 非小写字母 [^a-z]<br style="margin: 0px; padding: 0px;"   >\u 大写字母 [A-Z]<br style="margin: 0px; padding: 0px;"   >\U 非大写字母 [^A-Z]<br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   >表示数量的元字符<br style="margin: 0px; padding: 0px;"   >元字符 说明<br style="margin: 0px; padding: 0px;"   >* 匹配0-任意个<br style="margin: 0px; padding: 0px;"   >\+ 匹配1-任意个<br style="margin: 0px; padding: 0px;"   >\? 匹配0-1个<br style="margin: 0px; padding: 0px;"   >\{n,m} 匹配n-m个<br style="margin: 0px; padding: 0px;"   >\{n} 匹配n个<br style="margin: 0px; padding: 0px;"   >\{n,} 匹配n-任意个<br style="margin: 0px; padding: 0px;"   >\{,m} 匹配0-m个<br style="margin: 0px; padding: 0px;"   >\_. 匹配包含换行在内的所有字符<br style="margin: 0px; padding: 0px;"   >\{-} 表示前一个字符可出现零次或多次，但在整个正则表达式可以匹配成功的前提下，匹配的字符数越少越好<br style="margin: 0px; padding: 0px;"   >\= 匹配一个可有可无的项<br style="margin: 0px; padding: 0px;"   >\_s 匹配空格或断行<br style="margin: 0px; padding: 0px;"   >\_[]<br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   >元字符 说明<br style="margin: 0px; padding: 0px;"   >\* 匹配 * 字符。<br style="margin: 0px; padding: 0px;"   >\. 匹配 . 字符。<br style="margin: 0px; padding: 0px;"   >\/ 匹配 / 字符。<br style="margin: 0px; padding: 0px;"   >\\ 匹配 \ 字符。<br style="margin: 0px; padding: 0px;"   >\[ 匹配 [ 字符。<br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   >表示位置的符号<br style="margin: 0px; padding: 0px;"   >元字符 说明<br style="margin: 0px; padding: 0px;"   >$ 匹配行尾<br style="margin: 0px; padding: 0px;"   >^ 匹配行首<br style="margin: 0px; padding: 0px;"   >\&lt; 匹配单词词首<br style="margin: 0px; padding: 0px;"   >\&gt; 匹配单词词尾<br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   >替换变量<br style="margin: 0px; padding: 0px;"   >在正规表达式中使用 \( 和 \) 符号括起正规表达式，即可在后面使用\1、\2等变量来访问 \( 和 \) 中的内容。<br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   >懒惰模式<br style="margin: 0px; padding: 0px;"   >\{-n,m} 与\{n,m}一样，尽可能少次数地重复<br style="margin: 0px; padding: 0px;"   >\{-} 匹配它前面的项一次或0次, 尽可能地少<br style="margin: 0px; padding: 0px;"   >\| "或"操作符<br style="margin: 0px; padding: 0px;"   >\&amp; 并列<br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   >函数式<br style="margin: 0px; padding: 0px;"   >:s/替换字符串/\=函数式<br style="margin: 0px; padding: 0px;"   >在函数式中可以使用 submatch(1)、submatch(2) 等来引用 \1、\2 等的内容，而submatch(0)可以引用匹配的整个内容。<br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   >与Perl正则表达式的区别 ?<br style="margin: 0px; padding: 0px;"   >元字符的区别<br style="margin: 0px; padding: 0px;"   >Vim语法 Perl语法 含义<br style="margin: 0px; padding: 0px;"   >\+ + 1-任意个<br style="margin: 0px; padding: 0px;"   >\? ? 0-1个<br style="margin: 0px; padding: 0px;"   >\{n,m} {n,m} n-m个<br style="margin: 0px; padding: 0px;"   >\(和\) (和) 分组<br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   >例如：<br style="margin: 0px; padding: 0px;"   >1, 去掉所有的行尾空格：“:%s/\s\+$//”。“%”表示在整个文件范围内进行替换，“\s”表示空白字符（空格和制表符），“\+”对前面的字符匹 配一次或多次（越多越好），“___FCKpd___0rdquo;匹配行尾（使用“\___FCKpd___0rdquo;表示单纯的 “___FCKpd___0rdquo;字符）；被替换的内容为空；由于一行最多只需替换一次，不需要特殊标志。这个还是比较简单 的。(/&lt;Space&gt;&lt;Tab&gt;)<br style="margin: 0px; padding: 0px;"   >2,去掉所有的空白行：“:%s/\(\s*\n\)\+/\r/”。这回多了“ \(”、“\)”、“\n”、“\r”和 “*”。“*”代表对前面的字符（此处为“\s”）匹配零次或多次（越多越好；使用“\*”表示单纯的“*”字符），“\n”代表换行符，“\r”代表回 车符，“\(”和“\)”对表达式进行分组，使其被视作一个不可分割的整体。因此，这个表达式的完整意义是，把连续的换行符（包含换行符前面可能有的连续 空白字符）替换成为一个单个的换行符。唯一很特殊的地方是，在模式中使用的是“\n”，而被替换的内容中却不能使用“\n”，而只能使用“\r”。原因是 历史造成的，详情如果有兴趣的话可以查看“:help NL-used-for-Nul”。<br style="margin: 0px; padding: 0px;"   >3,去掉所有的“//”注释：“:%s!\ s*//.*!!”。首先可以注意到，这儿分隔符改用了“!”，原因是在模式或字符串部分使用了“/”字符，不换用其他分隔符的话就得在每次使用“/”字 符本身时写成“\/”，上面的命令得写成“:%s/\s*\/\/.*//”，可读性较低。命令本身倒是相当简单，用过正则表达式的人估计都知道“.”匹 配表示除换行符之外的任何字符吧。<br style="margin: 0px; padding: 0px;"   >4,去掉所有的“/* */”注释：“:%s!\s*/\*\_.\{-}\*/\s*! !g”。这个略有点复杂了，用到了几个不太常用的 Vim 正则表达式特性。“\_.”匹配包含换行在内的所有字符；“\{-}”表示前一个字符可出现零次或多次，但在整个正则表达式可以匹配成功的前提下，匹配的 字符数越少越好；标志“g”表示一行里可以匹配和替换多次。替换的结果是个空格的目的是保证像“int/* space not necessary around comments */main()”这样的表达式在替换之后仍然是合法的。<br style="margin: 0px; padding: 0px;"   ><br style="margin: 0px; padding: 0px;"   >:g/^\s*$/d 删除只有空白的行<br style="margin: 0px; padding: 0px;"   >:s/\(\w\+\)\s\+\(\w\+\)/\2\t\1 将 data1 data2 修改为 data2 data1<br style="margin: 0px; padding: 0px;"   >:%s/\(\w\+\), \(\w\+\)/\2 \1/ 将 Doe, John 修改为 John Doe<br style="margin: 0px; padding: 0px;"   >:%s/\&lt;id\&gt;/\=line(".") 将各行的 id 字符串替换为行号<br style="margin: 0px; padding: 0px;"   >:%s/\(^\&lt;\w\+\&gt;\)/\=(line(".")-10) .".". submatch(1)&nbsp;<br style="margin: 0px; padding: 0px;"   >将每行开头的单词替换为(行号-10).单词的格式,如第11行的word替换成1. word<br style="margin: 0px; padding: 0px;"   >排序 :/OB/+1,$!sort</p></div></div>
	</div>
</div>
</body>
</html>