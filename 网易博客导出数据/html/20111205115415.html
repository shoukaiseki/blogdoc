<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">maximo中执行sql语句收藏（摘自csdn博客-xczheng）</h2>
	<h5 id="">2011-12-05 11:54:15&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/1928561492011115115415536/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><span style="font-family: Arial; font-size: 12px; line-height: 18px; background-color: rgb(220, 235, 156);"  ><table style="table-layout: fixed; width: 880px;"  ><tbody><tr><td style="font-family: Arial; word-wrap: break-word; word-break: break-all; visibility: visible !important; zoom: 1 !important; filter: none; font-size: 12px; line-height: 18px;"  ><div id="blog_text"  style="font-family: Arial; word-wrap: break-word; word-break: normal; visibility: visible !important; zoom: 1 !important; filter: none; font-size: 12px; line-height: 18px; overflow-x: hidden; overflow-y: hidden; position: relative !important;"  ><p style="line-height: normal;"  >1、在&nbsp;<strong style="line-height: normal; color: black; background-color: rgb(255, 255, 102);"  >maximo</strong>中执行一个完整的sql语句</p><p style="line-height: normal;"  >在<strong style="line-height: normal; color: black; background-color: rgb(255, 255, 102);"  >maximo</strong>中执行sql语句首先获取一个连接：</p><p style="line-height: normal;"  >Connection con = MXServer.getMXServer().getDBManager().getSystemConnection();</p><p style="line-height: normal;"  ></p><p style="line-height: normal;"  >Statement st=null;</p><p style="line-height: normal;"  ><br style="line-height: normal;"  >ResultSet rs=null;</p><p style="line-height: normal;"  ></p><p style="line-height: normal;"  >String sql = "select * from asset where ........";</p><p style="line-height: normal;"  ></p><p style="line-height: normal;"  >try{</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; st = con.createStatement();</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; rs = null;</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; st.execute(sql);</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; rs = st.getResultSet();</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; while(rs.next){</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dosomething</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; }</p><p style="line-height: normal;"  >}catch(SQLException e){</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();</p><p style="line-height: normal;"  >}finally{</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; try{</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(rs!=null)</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rs.close();</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; }catch(SQLException e){</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; }</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; try{</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(st != null)</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; st.close();</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; }catch(SQLException e){</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; }</p><p style="line-height: normal;"  >}</p><p style="line-height: normal;"  ></p><p style="line-height: normal;"  >2、执行mboset.setWhere():</p><p style="line-height: normal;"  >String sql = "assetnum = '"+.......+"'";//sql中只有where语句部分，而且mboset对应的表中必须有assetnum这个字段</p><p style="line-height: normal;"  ></p><p style="line-height: normal;"  >3、在DataBean中执行mbsetQbe(字段名,String)，用来对数据进行过滤，有点像hibernate中的数据过滤，呵呵</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; 也可以mboset.setQbe();</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; 例如：</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; 在一个表绑定的DataBean中：</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; setQbe("assetnum",app.getappBean().getString("assetnum"));</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; 这样就对这个表中的数据进行了过滤</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp;</p><p style="line-height: normal;"  >4、SqlFormat sqf = new SqlFormat(asset,"assetnum =: assetnum");</p><p style="line-height: normal;"  >&nbsp;&nbsp;&nbsp;&nbsp; mboset.setWhere(sqf.format());</p></div></td></tr></table></span><wbr></div>
	</div>
</div>
</body>
</html>