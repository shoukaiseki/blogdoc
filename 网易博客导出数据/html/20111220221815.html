<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">oracle,删除所有表</h2>
	<h5 id="">2011-12-20 22:18:15&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/19285614920111120101646832/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><h2 style="margin-top: 10px; text-align: -webkit-auto;"  ><font size="2"  style="background-color: rgb(255, 255, 255);"  ><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-weight: normal; line-height: normal;"  >以下方法本人试过，在sqlplus下最好用的删除，还原方法是：</span><br style="font-weight: normal; line-height: normal;"  ><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-weight: normal; line-height: normal;"  >把删除表，写成脚本：</span><h2 style="margin-top: 10px;"  ><font face="Verdana, Geneva, Arial, Helvetica, sans-serif"  size="2"  ><span style="font-weight: normal; line-height: normal;"  >　　SQL&gt;SET HEAD OFF&nbsp;</span></font></h2><h2 style="margin-top: 10px;"  ><font face="Verdana, Geneva, Arial, Helvetica, sans-serif"  size="2"  ><span style="font-weight: normal; line-height: normal;"  >　　SQL&gt;SPOOL &nbsp;/tmp/database/drop_tables.sql&nbsp;</span></font></h2><h2 style="margin-top: 10px;"  ><font face="Verdana, Geneva, Arial, Helvetica, sans-serif"  size="2"  ><span style="font-weight: normal; line-height: normal;"  >　　SQL&gt;select 'drop table '||table_name||';' from user_tables;&nbsp;</span></font></h2><h2 style="margin-top: 10px;"  ><font face="Verdana, Geneva, Arial, Helvetica, sans-serif"  size="2"  ><span style="font-weight: normal; line-height: normal;"  >　　SQL&gt;spool off;&nbsp;</span></font></h2><h2 style="margin-top: 10px;"  ><font face="Verdana, Geneva, Arial, Helvetica, sans-serif"  size="2"  ><span style="font-weight: normal; line-height: normal;"  >　　SQL&gt;@/tmp/database/drop_tables.sql;&nbsp;</span></font></h2><h2 style="margin-top: 10px;"  ><font face="Verdana, Geneva, Arial, Helvetica, sans-serif"  size="2"  ><span style="font-weight: normal; line-height: normal;"  >　　SQL &gt;@drop_tables.sql&nbsp;</span></font></h2></font></h2><h2 style="margin-top: 10px; text-align: -webkit-auto;"  ><span style="background-color: rgb(255, 255, 255);"  ><font size="2"  ><br style="font-weight: normal; line-height: normal;"  ><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-weight: normal; line-height: normal;"  >然后再还原数据。</span><br style="font-weight: normal; line-height: normal;"  ><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-weight: normal; line-height: normal;"  >imp&nbsp;<font color="#0000ff"  >maximo/maximo</font></span><font color="#0000ff"  style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; line-height: normal;"  ><a style="text-decoration: none; font-weight: normal; line-height: normal; " rel="nofollow" href="mailto:username/DBA@ORCL"  >@</a>orcl</font><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-weight: normal; line-height: normal;"  >&nbsp;fromuser=<font color="#0000ff"  >maximo</font></span><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-weight: normal; line-height: normal;"  ><font color="#0000ff"  >&nbsp;</font>touser=</span><font color="#0000ff"  style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; line-height: normal;"  ><a style="text-decoration: none; font-weight: normal; line-height: normal; " rel="nofollow" href="mailto:username/DBA@ORCL"  >m</a>aximo</font><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-weight: normal; line-height: normal;"  >&nbsp;file=</span><font color="#0000ee"  face="Verdana, Geneva, Arial, Helvetica, sans-serif"  ><span style="font-weight: normal; line-height: normal;"  >21时14分34秒.dmp</span></font><font face="Verdana, Geneva, Arial, Helvetica, sans-serif"  ><span style="font-weight: normal; line-height: normal;"  >&nbsp; tablespaces=tablespaces</span></font></font><br style="font-weight: normal; line-height: normal;"  ></span></h2><div><font size="2"  ><font face="Verdana, Geneva, Arial, Helvetica, sans-serif"  ><span style="font-weight: normal; line-height: normal; background-color: rgb(255, 255, 255);"  ><br></span></font></font></div><div><font face="Verdana, Geneva, Arial, Helvetica, sans-serif"  style="background-color: rgb(255, 255, 255);"  ><div style="color: rgb(255, 0, 0); font-size: x-large;"  >嚅_所有已B接到斓挠</div><div><h2 style="margin-top: 10px; text-align: -webkit-auto;"  ><font size="2"  ><span style="font-weight: normal; line-height: 20px;"  >查看所有已B接的用select * from v$session where username is not null;&nbsp;</span></font><span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans-serif; line-height: 33px; font-size: x-large; font-weight: normal;"  ><span style="line-height: 20px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: small;"  >;</span><span style="line-height: 20px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: small;"  >&nbsp;</span></span></h2></div><div><font size="2"  ><span style="line-height: 20px;"  >嚅_B接到MAXIMO用舻倪B接</span></font></div><div><font size="2"  ><span style="line-height: 20px;"  ><br></span></font></div><div><font size="2"  ><div>　　SQL&gt;SET HEAD OFF&nbsp;</div><div><br></div><div>　　SQL&gt;SPOOL &nbsp;/tmp/database/killusers.sql&nbsp;</div><div><br></div><div>　　SQL&gt;select 'alter system kill session '''||sid||','||serial#||''';' from v$session where username='MAXIMO';&nbsp;</div><div><br></div><div>　　SQL&gt;spool off;&nbsp;</div><div><br></div><div>　　SQL&gt;@/tmp/database/killusers.sql;&nbsp;</div><div><br></div><div>　　sql &gt;@killuser.sql</div></font></div></font></div></div>
	</div>
</div>
</body>
</html>