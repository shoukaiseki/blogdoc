<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">java访问oracle数据库</h2>
	<h5 id="">2011-11-16 22:58:19&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/19285614920111016105819820/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><span style="color: rgb(255, 0, 0); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 32px; background-color: rgb(219, 185, 175); font-size: large;"  >查看高亮显示方式&nbsp;</span><wbr><a target="_blank" rel="nofollow" href="http://hi.baidu.com/jiangxinyi21/blog/item/6e813944da69fde4d62afc61.html"  >http://hi.baidu.com/jiangxinyi21/blog/item/6e813944da69fde4d62afc61.html</a><div><br></div><div><div>package oraclesql;</div><div><br></div><div>import java.io.BufferedReader;</div><div>import java.io.InputStreamReader;</div><div>import java.sql.Connection;</div><div>import java.sql.DriverManager;</div><div>import java.sql.PreparedStatement;</div><div>import java.sql.ResultSet;</div><div>import java.sql.Statement;</div><div>import java.util.Arrays;</div><div>import java.sql.*;</div><div>import java.io.*;</div><div>import java.util.*;</div><div>public class JdbcDrive {</div><div><br></div><div><span style="white-space:pre;"  > </span>public static void main(String[] args)&nbsp;</div><div><span style="white-space:pre;"  > </span>{&nbsp;</div><div><span style="white-space:pre;"  >  </span>Connection con=null;&nbsp;</div><div><span style="white-space:pre;"  >  </span>Statement sm=null;&nbsp;</div><div><span style="white-space:pre;"  >  </span>String command=null;&nbsp;</div><div><span style="white-space:pre;"  >  </span>ResultSet rs=null;&nbsp;</div><div><span style="white-space:pre;"  >  </span>String tableName=null;&nbsp;</div><div><span style="white-space:pre;"  >  </span>String cName=null;&nbsp;</div><div><span style="white-space:pre;"  >  </span>String result=null;&nbsp;</div><div><span style="white-space:pre;"  >  </span>String url="jdbc:oracle:thin:@127.0.0.1:1521:orcl";</div><div>//<span style="white-space:pre;"  >  </span>mxe.db.driver=oracle.jdbc.OracleDriver</div><div><span style="white-space:pre;"  >  </span>String user="asus";</div><div><span style="white-space:pre;"  >  </span>String password="asus";</div><div><span style="white-space:pre;"  >  </span>BufferedReader input=new BufferedReader(new InputStreamReader(System.in));&nbsp;</div><div><span style="white-space:pre;"  >  </span>try&nbsp;</div><div><span style="white-space:pre;"  >  </span>{&nbsp;</div><div><span style="white-space:pre;"  >   </span>//（1）装载并注册数据库的JDBC驱动程序 &nbsp; &nbsp;</div><div><span style="white-space:pre;"  >   </span>//载入JDBC驱动：oracle安装目录下的jdbc\lib\classes12.jar</div><div><span style="white-space:pre;"  >   </span>Class.forName("oracle.jdbc.driver.OracleDriver");&nbsp;</div><div><span style="white-space:pre;"  >   </span>System.out.println("驱动程序已加载");&nbsp;</div><div><span style="white-space:pre;"  >   </span>//注册JDBC驱动：有些地方可不用此句</div><div><span style="white-space:pre;"  >   </span>java.sql.DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());</div><div><br></div><div><span style="white-space:pre;"  >   </span>con = DriverManager.getConnection(url, user, password);</div><div><span style="white-space:pre;"  >   </span>System.out.println("OK,成功连接到数据库");&nbsp;</div><div><span style="white-space:pre;"  >   </span></div><div><span style="white-space:pre;"  >  </span>}</div><div><span style="white-space:pre;"  >  </span>catch(Exception ex)</div><div><span style="white-space:pre;"  >  </span>{&nbsp;</div><div><span style="white-space:pre;"  >   </span>ex.printStackTrace();&nbsp;</div><div><span style="white-space:pre;"  >  </span>}&nbsp;</div><div><span style="white-space:pre;"  >  </span>try&nbsp;</div><div><span style="white-space:pre;"  >  </span>{&nbsp;</div><div><span style="white-space:pre;"  >   </span>/*</div><div><span style="white-space:pre;"  >   </span> * 插入数据</div><div><span style="white-space:pre;"  >   </span> */</div><div>//<span style="white-space:pre;"  >   </span> PreparedStatement pst = con.prepareStatement(</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"insert into test12(ID,SBMC) values(?,?)");</div><div>//<span style="white-space:pre;"  >    </span>System.out.println("要5");</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;pst.setString(1, "131");</div><div>//<span style="white-space:pre;"  >   </span>System.out.println("要4");</div><div>//</div><div>//<span style="white-space:pre;"  >   </span>System.out.println("要2");</div><div>////<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;pst.setCharacterStream(2,</div><div>////<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new InputStreamReader(new ByteArrayInputStream(s.</div><div>////<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;getBytes())), s.length());</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;pst.setString(2,"有机会");</div><div>//</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;//pst.setString(2,s); &nbsp;//用此句则异常</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;pst.execute();</div><div><br></div><div><span style="white-space:pre;"  >   </span>/*</div><div><span style="white-space:pre;"  >   </span> * 查询数据</div><div><span style="white-space:pre;"  >   </span> */</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;Statement st = con.createStatement();</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;ResultSet r = st.executeQuery("SELECT * from test12");</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;while (r.next()) {</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp;<span style="white-space:pre;"  > </span>//</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp;<span style="white-space:pre;"  > </span>int id=r.getInt(1);</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp;<span style="white-space:pre;"  > </span>String s = r.getString(2);</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp;<span style="white-space:pre;"  > </span>if (s==null) {</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp;<span style="white-space:pre;"  >  </span>s ="";</div><div><span style="white-space:pre;"  >   </span>}</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;String xggym =r.getString(3);</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp;<span style="white-space:pre;"  > </span>if (xggym==null) {</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp;<span style="white-space:pre;"  >  </span>xggym ="";</div><div><span style="white-space:pre;"  >   </span>}</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;String ddcsm =r.getString(5);</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp;<span style="white-space:pre;"  > </span>if (ddcsm==null) {</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp;<span style="white-space:pre;"  >  </span>ddcsm ="";</div><div><span style="white-space:pre;"  >   </span>}</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;/*</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp; * 方法0</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp; */</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;System.out.print(id+"\t");</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;/*</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp; * StringBuilder为字符串合并,在此做左对齐不理想</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp; */</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;StringBuilder sb = new StringBuilder(String.valueOf(s));</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;while(sb.length() &lt; 44){</div><div>//<span style="white-space:pre;"  >    </span>sb.insert(s.length(), "x");</div><div>//<span style="white-space:pre;"  >   </span>}</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;System.out.print(sb.toString());</div><div>////<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;System.out.print(s);</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;System.out.print("\t"+xggym+"\t"+ddcsm+"\t字符数"+s.length()+"\t字符数");</div><div>//<span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(sb.length());</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;/*</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp; * 方法1</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp; *&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space:pre;"  > </span>对齐,如果用Eclipse显示不齐则改变下字体</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space:pre;"  > </span>更改java文件大小设置</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space:pre;"  > </span>Window-&gt;preferences-&gt;General-&gt;Appearance-&gt;Colors &nbsp; and &nbsp; Fonts-&gt;Java-&gt;Java Editor Text Font-&gt;右边按钮Change</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space:pre;"  > </span>英文版默认的是Courier New 常规 10</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp; */</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;System.out.print(id+"\t");</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;System.out.print(stringLength(s,40));//加字符总长度为40</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;System.out.print(stringLength(xggym,20));</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(ddcsm);</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;}</div><div><br></div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;r.close();</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;st.close();</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp;con.close();&nbsp;</div><div><span style="white-space:pre;"  >   </span>System.out.println("查询结束!");</div><div><span style="white-space:pre;"  >  </span>}</div><div><span style="white-space:pre;"  >  </span>catch(Exception ex)</div><div><span style="white-space:pre;"  >  </span>{&nbsp;</div><div><span style="white-space:pre;"  >   </span>ex.printStackTrace();&nbsp;</div><div><span style="white-space:pre;"  >  </span>}&nbsp;</div><div><span style="white-space:pre;"  > </span>}&nbsp;</div><div><span style="white-space:pre;"  > </span>/* 参数为stringLength(字符串,输出总长度)</div><div><span style="white-space:pre;"  > </span> * 对齐方法2,返回只包含空格的字符串</div><div><span style="white-space:pre;"  > </span> */</div><div><span style="white-space:pre;"  > </span>public static String stringLength(String s,int count) {</div><div><span style="white-space:pre;"  >  </span> &nbsp;String str=s;</div><div><span style="white-space:pre;"  >  </span> &nbsp;int j=0;</div><div><span style="white-space:pre;"  >  </span> &nbsp;int i=0;</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;if (str!=null) {//字符为空则长度为零</div><div><span style="white-space:pre;"  > </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="white-space:pre;"  > </span>j=length(str);</div><div><span style="white-space:pre;"  >   </span>}</div><div><span style="white-space:pre;"  >  </span> &nbsp;for ( i = 0; i &lt; count-j; i++) {</div><div><span style="white-space:pre;"  >  </span> &nbsp; str+=" ";</div><div><span style="white-space:pre;"  >  </span> &nbsp;}</div><div><span style="white-space:pre;"  >  </span> &nbsp;</div><div><span style="white-space:pre;"  >  </span> &nbsp;return str;</div><div><span style="white-space:pre;"  > </span>}</div><div><span style="white-space:pre;"  > </span>/*</div><div><span style="white-space:pre;"  > </span> * 参数为字符总长度对齐方法,返回只包含空格的字符串</div><div><span style="white-space:pre;"  > </span> *能够整齐了,复制后到记事本能对齐</div><div><span style="white-space:pre;"  > </span> */</div><div><span style="white-space:pre;"  > </span> public static String getPlace(int count){</div><div><span style="white-space:pre;"  >  </span> &nbsp;String str="";</div><div><span style="white-space:pre;"  >  </span> &nbsp;for (int i = 0; i &lt; count; i++) {</div><div><span style="white-space:pre;"  >  </span> &nbsp; str+="\t";</div><div><span style="white-space:pre;"  >  </span> &nbsp; i+=7;//一个空格4个字符</div><div><span style="white-space:pre;"  >  </span> &nbsp;}</div><div><span style="white-space:pre;"  >  </span> &nbsp;return str;</div><div><span style="white-space:pre;"  >  </span> }</div><div><span style="white-space:pre;"  > </span>&nbsp;</div><div><span style="white-space:pre;"  >  </span>/*</div><div><span style="white-space:pre;"  >  </span> * 对齐方法2,返回只包含空格的字符串</div><div><span style="white-space:pre;"  >  </span> */</div><div><span style="white-space:pre;"  > </span> public static String getPlaceb(int count){</div><div><span style="white-space:pre;"  >  </span> &nbsp;String str="";</div><div><span style="white-space:pre;"  >  </span> &nbsp;int i = 0;</div><div><span style="white-space:pre;"  >  </span> &nbsp;for ( i = 0; i &lt; count; i++) {</div><div><span style="white-space:pre;"  >  </span> &nbsp; str+=" ";</div><div><span style="white-space:pre;"  >  </span> &nbsp;}</div><div><span style="white-space:pre;"  >  </span> &nbsp;return str;</div><div><span style="white-space:pre;"  >  </span> }</div><div><span style="white-space:pre;"  > </span>&nbsp;</div><div><span style="white-space:pre;"  > </span> /**&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;* &nbsp; 判断一个字符是Ascill字符还是其它字符（如汉，日，韩文字符）&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;* &nbsp; @param &nbsp; char &nbsp; c, &nbsp; 需要判断的字符&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;* &nbsp; @return &nbsp; boolean, &nbsp; 返回true,Ascill字符&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;*/&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;public static boolean isLetter(char c) &nbsp; {&nbsp;</div><div><span style="white-space:pre;"  >  </span> &nbsp;int k = 0x80;&nbsp;</div><div><span style="white-space:pre;"  >  </span> &nbsp;return c/k == 0?true:false;&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;}&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;/**&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;* &nbsp; 得到一个字符串的长度,显示的长度,一个汉字或日韩文长度为2,英文字符长度为1&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;* &nbsp; @param &nbsp; String &nbsp; s &nbsp; ,需要得到长度的字符串&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;* &nbsp; @return &nbsp; int, &nbsp; 得到的字符串长度&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;*/&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;public static int length(String s){&nbsp;</div><div><span style="white-space:pre;"  >  </span> &nbsp;char[] c=s.toCharArray();&nbsp;</div><div><span style="white-space:pre;"  >  </span> &nbsp;int len=0;&nbsp;</div><div><span style="white-space:pre;"  >  </span> &nbsp;for(int i=0;i&lt;c.length;i++)&nbsp;</div><div><span style="white-space:pre;"  >  </span> &nbsp;{&nbsp;</div><div><span style="white-space:pre;"  >   </span> &nbsp;len++;&nbsp;</div><div><span style="white-space:pre;"  >   </span> &nbsp;if(!isLetter(c[i]))&nbsp;</div><div><span style="white-space:pre;"  >   </span> &nbsp;{&nbsp;</div><div><span style="white-space:pre;"  >    </span> &nbsp;len++;&nbsp;</div><div><span style="white-space:pre;"  >   </span> &nbsp;}&nbsp;</div><div><span style="white-space:pre;"  >  </span> &nbsp;}&nbsp;</div><div><span style="white-space:pre;"  >  </span> &nbsp;return &nbsp; len;&nbsp;</div><div><span style="white-space:pre;"  > </span> &nbsp;}&nbsp;</div><div>}</div><div><br></div><div><br></div><div><br></div><div>/*</div><div>&nbsp;* &nbsp;在Java程序中，通过JDBC访问Oracle数据库的步骤</div><div>2006-01-01 19:05 3041人阅读 评论(1) 收藏 举报</div><div>（1）装载并注册数据库的JDBC驱动程序 &nbsp; &nbsp;</div><div>载入JDBC驱动：</div><div>Class.forName("oracle.jdbc.driver.OracleDriver");</div><div>注册JDBC驱动：</div><div>java.sql.DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());</div><div>&nbsp;</div><div>（2）建立与数据库的连接</div><div>要建立与数据库的连接，首先要创建指定数据库的URL。连接数据库的URL对象，利用DriverManager 的getConnection方法建立的。数据库URL对象与网络资源的统一资源定位类似，其构成格式如下：</div><div>jdbc:subProtocol:subName://hostname:port;DatabaseName=</div><div>其中：</div><div>jdbc表示当前通过Java的数据库连接进行数据库访问；</div><div>subProtocol表示通过某种驱动程序支持的数据库连接机制；</div><div>subName表示在当前连接机制下的具体名称；</div><div>hostname表示主机名；</div><div>port表示相应的连接端口；</div><div>DatabaseName表示要连接的数据库的名称。</div><div>这里以与Oracle数据库的连接为例：</div><div>连接Oracle 8/8i/9i数据库(用thin模式)</div><div>url = jdbc:oracle:thin:@hostip:1521:oracleSID;</div><div>注意：hostip指主机的ip地址，oracleSID指数据库的SID。</div><div>再者确定连接数据库的用户名与密码，即user和password 的值：</div><div>user = “ “;</div><div>password = ““;</div><div>最后使用如下语句：</div><div>Connection con=java.sql.DriverManager.getConnection(url,user,password);</div><div>&nbsp;</div><div>（3）创建Statement对象</div><div>例如：</div><div>Statement stmt = con.createStatement();</div><div>&nbsp;</div><div>（4）调用并执行SQL语句</div><div>例如：</div><div>String sql = “select a,b,c &nbsp;from table1";//table1为你所要查询的表名,a,b,c为所要查询的字段</div><div>ResultSet rs = stmt.executeQuery(sql);</div><div>&nbsp;</div><div>（５）访问ResultSet中的记录集并从中取出记录</div><div>例如：</div><div>rs.next( );</div><div>rs.absolute(4);</div><div>String col1=rs.getString(1);</div><div>……..</div><div>&nbsp;</div><div>（6）依次关闭ResultSet、Statement和Connection对象</div><div>例如：</div><div>rs.close();</div><div>stmt.close();</div><div>con.close();</div><div>&nbsp;*/</div></div></div>
	</div>
</div>
</body>
</html>