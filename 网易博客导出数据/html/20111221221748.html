<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>蒋カイセキ 的博客</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">蒋カイセキ 的博客</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Linux下安装Oracle</h2>
	<h5 id="">2011-12-21 22:17:48&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/shoukaiseki/blog/static/19285614920111121101748937/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>oracle官网下载地址<a target="_blank" rel="nofollow" href="http://oss.oracle.com/projects/compat-oracle/files/RedHat/"  >http://oss.oracle.com/projects/compat-oracle/files/RedHat/</a></div><div><div>安装时所需的包,我打包后的<a target="_blank" rel="nofollow" href="http://115.com/file/bellegce#"  >oraclerpm.tar.gz</a>下载地址&nbsp;<a target="_blank" rel="nofollow" href="http://115.com/file/bellegce#"  >http://115.com/file/bellegce#</a></div><div><a target="_blank" rel="nofollow" href="http://115.com/file/an99n0ej#"  >10201_database_linux32.zip</a>&nbsp;&nbsp;<span style="line-height: 22px;"  >下载地址</span><a target="_blank" rel="nofollow" href="http://115.com/file/an99n0ej#"  >http://115.com/file/an99n0ej#</a></div></div><div>安装方法转载<a target="_blank" rel="nofollow" href="http://www.233.com/oracle/zonghe/20101119/132750503.html"  >http://www.233.com/oracle/zonghe/20101119/132750503.html</a></div><div><br></div><div><div>yum -y install libaio-devel.i686</div><div>yum -y install libaio*</div><div>yum -y install libXp*</div><div>yum -y localinstall binutils-2.15.92.0.2-15.0.0.0.2.x86_64.rpm</div><div>yum -y localinstall compat-libcwait-2.1-1.i386.rpm</div><div>yum -y localinstall compat-libstdc++-3.2-1.i386.rpm</div><div>yum -y localinstall compat-oracle-rhel4-1.0-5.i386.rpm</div><div>yum -y localinstall libgcc32-3.2.3-49.i386.rpm</div><div>yum -y localinstall libstdc++32-3.2.3-49.i386.rpm</div><div>yum -y localinstall openmotif21-2.1.30-11.RHEL4.5.ppc.rpm</div><div>yum -y localinstall openmotif21-2.1.30-11.RHEL4.5.s390.rpm</div><div>yum -y localinstall openmotif21-2.1.30-11.RHEL5.s390.rpm</div><div><br></div><div>yum -y install compat-db</div><div>yum -y install compat-gcc</div><div>yum -y install compat-gcc-c++</div><div>yum -y install compat-libstdc++</div><div>yum -y install compat-libstdc++-devel</div><div>yum -y install xclock</div></div><div><br></div><div><br></div><div>三.创建数据库安装的准备工作:&nbsp;</div><div>1.创建用户和组(user/group)；&nbsp;</div><div>groupadd dba&nbsp;</div><div>groupadd oinstall&nbsp;</div><div>useradd oracle -g oinstall -G dba&nbsp;</div><div>passwd oracle&nbsp;</div><div>(密码为maximo)</div><div>mkdir -p /opt/oracle/product/10g</div><div>mkdir /opt/oracle/database</div><div>chown -R oracle.oinstall /opt/oracle</div><div>chmod 755 -R /opt/oracle</div><div><br></div><div>2， 配置环境变量；&nbsp;</div><div>使用第一步创建的用户名Oracle登陆:&nbsp;</div><div>su oracle&nbsp;</div><div>vi ~/.bash_profile&nbsp;</div><div>修改以下是配置文件的内容</div><div>export ORACLE_BASE=/home/oracle/oracle/</div><div>export ORACLE_HOME=/home/oracle/oracle/product/10.2.0/db_1</div><div>export ORACLE_SID=orcl(可随意定义)</div><div>export PATH=$ORACLE_HOME/bin:$PATH</div><div><br></div><div>ESC(退出vi的编辑环境)</div><div>:wq(退出vi应用程序并保存修改)</div><div>配置好后用 source .bash_profile 命令使配置生效</div><div><br></div><div>我的热</div><div># .bash_profile</div><div><br></div><div># Get the aliases and functions</div><div>if [ -f ~/.bashrc ]; then</div><div>&nbsp; &nbsp; &nbsp; &nbsp; . ~/.bashrc</div><div>fi</div><div><br></div><div># User specific environment and startup programs</div><div><br></div><div>PATH=$PATH:$HOME/.local/bin:$HOME/bin</div><div><br></div><div>export ORACLE_BASE=/home/oracle/oracle/</div><div>export ORACLE_HOME=/home/oracle/oracle/product/10.2.0/db_1</div><div>export ORACLE_SID=orcl</div><div>export PATH=$ORACLE_HOME/bin:$PATH</div><div><br></div><div><br></div><div><br></div><div>四.设置系统参数；</div><div>Oracle 数据库 10g 需要以下所示的内核参数设置。</div><div>其中给出的是最小值，因此如果您的系统使用的值较大，则不要更改它。</div><div>切换到root用户:</div><div>su root&nbsp;</div><div>a) 修改/etc/sysctl.conf(vi /etc/sysctl.conf), 添加：&nbsp;</div><div><br></div><div>kernel.shmmax = 2147483648</div><div>kernel.shmmni = 4096&nbsp;</div><div>kernel.shmall = 2097152&nbsp;</div><div>kernel.sem = 250 32000 100 128&nbsp;</div><div>fs.file-max = 65536&nbsp;</div><div>net.ipv4.ip_local_port_range = 1024 65000&nbsp;</div><div>net.core.rmem_default=262144</div><div>net.core.rmem_max=262144</div><div>net.core.wmem_default=262144</div><div>net.core.wmem_max=262144</div><div><br></div><div>修改后运行"/sbin/sysctl -p"命令使得内核改变立即生效；&nbsp;</div><div><br></div><div>B) 设置oracle对文件的要求：&nbsp;</div><div>编辑文件：vi /etc/security/limits.conf 加入以下语句：&nbsp;</div><div>oracle soft nproc 2047</div><div>oracle hard nproc 16384</div><div>oracle soft nofile 1024</div><div>oracle hard nofile 65536</div><div>编辑文件：vi /etc/pam.d/login 加入以下语句(可能应该加在最后一条规则之前）:</div><div>session required /lib/security/pam_limits.so</div><div><br></div><div>安装Oralce10G</div><div><br></div><div><br></div><div>（一）开始安装：&nbsp;</div><div>su&nbsp;</div><div>unzip 10201_database_linux32.zip -d /tmp/database</div><div>chmod 755 -R /tmp/database</div><div>cd /tmp/database/database</div><div>su oracle</div><div>echo LANG &nbsp; 查看系统语言 &nbsp;zh_CN.UTF-8</div><div>export LANG=en_US 设置系统语言为英文,解决乱码</div><div>./runInstaller -ignoresysprereqs 跳过系统版本验证&nbsp;</div><div>ORACLE安装图解 格式采用 AMERICAN_AMERICA.ZHS16GBK</div><div>http://www.hackvip.com/article/sort0132/sort0165/Hackvip_194399.html</div><div>export LANG=zh_CN.UTF-8 &nbsp;⑾到yZ言改回中文</div><div>配置O &nbsp;netmgr 在Linux/Unix下，利用netmgr命令来启动图形化Oracle网络管理器</div><div>/home/oracle/oracle/product/10.2.0/db_1/network/admin/listener.ora</div><div>颖O</div><div>lsnrctl start</div><div>z查O</div><div>lsnrctl status</div><div>查看O是否 PLSExtProc</div><div>netstat -ant</div><div>P]O</div><div>lsnrctl stop</div><div>启动isqlplus服务</div><div>isqlplusctl start</div><div>停止isqlplus服务</div><div>isqlplusctl stop</div><div></div><div>sqlplus /nolog</div><div>connect system/maximo &nbsp;ぬ/密a</div><div>connect /as sysdba &nbsp;如果提示嘞薏蛔阏查看下面O配置中的sqlnet.ora</div><div>shutdown immediate 关闭数据库</div><div>startup </div><div><div>启动oem服务</div><div>emctl start dbconsole</div><div>停止oem服务</div><div>emctl stop dbconsole</div></div><div><br></div><div>isqlplusctl服ya</div><div>先关闭服务</div><div>isqlplusctl stop</div><div>emctl stop dbconsole</div><div>再在三个目录中执行下面两句</div><div>cp font.properties font.properties.bak</div><div>cp ./font.properties.zh_CN.Redhat ./font.properties</div><div>三个目录位置为</div><div><div>&nbsp;$ORACLE_HOME/jre/1.4.2/lib/font.properties</div><div><span style="line-height: 21px;"  >&nbsp;$ORACLE_HOME</span>/jdk/jre/lib/font.properties</div><div><span style="line-height: 21px;"  >&nbsp;$ORACLE_HOME</span>/javavm/lib/ojvmfonts/font.properties</div></div><div>msyh微软雅黑字体下载我已经改名为<a target="_blank" rel="nofollow" href="http://115.com/file/c24t6qvd#"  >zysong.ttf</a>,直接放在/usr/share/fonts/zh_CN/TrueType下面即可</div><div><a target="_blank" rel="nofollow" href="http://115.com/file/c24t6qvd#"  >http://115.com/file/c24t6qvd#</a></div><div>很多方法是修改配置文件中的路径,我这人比较懒,就改下文件名可以了</div><div>此方法来自<a rel="nofollow" href="http://www.boobooke.com/bbs/thread-21005-1-1.html"  >http://www.boobooke.com/bbs/thread-21005-1-1.html</a></div><div>删除缓存isqlplus的gif图片及imx</div><div><div>rm -f $ORACLE_HOME/oc4j/j2ee/oc4j_applications/applications/isqlplus/isqlplus/cabo/images/cache/zhs/*</div></div><div>删除缓存em<span style="line-height: 22px;"  >的gif图片及imx</span></div><div><div>rm -f $ORACLE_HOME/oc4j/j2ee/oc4j_applications/applications/em/em/cabo/images/cache/zhs/*.gif</div></div><div>开启服务</div><div>isqlplusctl start</div><div>emctl start dbconsole</div><div><br></div><div><div>iSQL*Plus URL:</div><div>http://localhost:5560/isqlplus</div><div><br></div><div>iSQL*Plus DBA URL:</div><div>http://localhost:5560/isqlplus/dba</div><div><br></div><div>Enterprise Manager 10g Database Control URL:</div><div>http://localhost:1158/em</div></div><div><br></div><div></div><div>cp /media/usr/lydate/20111115.dmp /tmp/oracle/</div><div>chmod 777 /tmp/oracle/20111115.dmp</div><div>imp maximo/maximo@orcl &nbsp;file=/tmp/oracle/20111115.dmp full=y ignore=y</div><div><br></div><div>查看熳址集a型</div><div>&nbsp;select userenv ('language') from dual;</div><div>AMERICAN_AMERICA.AL32UTF8 &nbsp;本C</div><div>AMERICAN_AMERICA.ZHS16GBK &nbsp;165</div><div>创建一个EM资料库</div><div>emca -repos create</div><div>[root@fedora emca]# emca -repos create</div><div><br></div><div>EMCA 开始于 2011-12-20 10:34:17</div><div>EM Configuration Assistant 10.2.0.1.0 正式版</div><div>版权所有 (c) 2003, 2005, Oracle。保留所有权利。</div><div><br></div><div>输入以下信息:</div><div>数据库 SID: orcl</div><div>监听程序端口号: 1521</div><div>SYS 用户的口令: &nbsp;sys</div><div>SYSMAN 用户的口令: &nbsp;sysman</div><div><br></div><div>重建一个EM资料库</div><div>emca -repos recreate</div><div>删除一个EM资料库</div><div>emca -repos drop</div><div>配置数据库的 Database Control</div><div>emca -config dbcontrol db(未配置成功)</div><div>输入以下信息:</div><div>数据库 SID: orcl</div><div>监听程序端口号: 1521</div><div>SYS 用户的口令: &nbsp;sys</div><div>DBSNMP 用户的口令: &nbsp;maximo</div><div>SYSMAN 用户的口令: &nbsp;maximo</div><div>通知的电子邮件地址 (可选): jiangasus163@163.com</div><div>通知的发件 (SMTP) 服务器 (可选): smtp.163.com</div><div><br></div><div>删除数据库的 Database Control配置</div><div>emca -deconfig dbcontrol db</div><div>重新配置db control的端口，默认端口在1158</div><div>emca -reconfig ports</div><div>emca -reconfig ports -dbcontrol_http_port 1160</div><div>emca -reconfig ports -agent_port 3940</div><div>先设置ORACLE_SID环境变量后,启动EM console服务</div><div>emctl start dbconsole</div><div>先设置ORACLE_SID环境变量后,停止EM console服务</div><div>emctl stop dbconsole</div><div>先设置ORACLE_SID环境变量后,查看EM console服务的状态</div><div>emctl status dbconsole</div><div><br></div><div>配置dbconsole的步骤</div><div>emca -repos create</div><div>emca -config dbcontrol db</div><div>emctl start dbconsole</div><div>重新配置dbconsole的步骤</div><div>emca -repos drop</div><div>emca -repos create</div><div>emca -config dbcontrol db</div><div>emctl start dbconsole</div><div><br></div><div><br></div><div><br></div><div>错误：</div><div>Exception java.lang.UnsatisfiedLinkError: /tmp/OraInstall2011-12-19_06-42-41PM/jre/1.4.2/lib/i386/libawt.so: libXp.so.6: cannot open shared object file: No such file or directory occurred..</div><div>java.lang.UnsatisfiedLinkError: /tmp/OraInstall2011-12-19_06-42-41PM/jre/1.4.2/lib/i386/libawt.so: libXp.so.6: cannot open shared object file: No such file or directory</div><div>解决方法</div><div>yum install libXp*</div><div><br></div><div><br></div><div>在Linux系统要远程连接oracle的防火墙设置方法：</div><div><br></div><div>打开5801至5810 端口用于vnc</div><div><br></div><div>iptables -I INPUT -p tcp --dport 5801:5810 -j ACCEPT</div><div><br></div><div>iptables -I INPUT -p tcp --dport 5901:5910 -j ACCEPT</div><div><br></div><div>iptables -A INPUT -p tcp --dport 5801:5810 -j ACCEPT</div><div>iptables -A INPUT -p tcp --dport 5901:5910 -j ACCEPT</div><div><br></div><div>打开1521 端口用于oracle</div><div><br></div><div>iptables -I INPUT -p tcp --dport 1521 -j ACCEPT</div><span style="line-height: 22px;"  >iptables -A INPUT -p tcp --dport 1521 -j ACCEPT</span><div>iptables -I INPUT -p tcp --dport 5560 -j ACCEPT</div><div>iptables -A INPUT -p tcp --dport 5560 -j ACCEPT</div><div style="line-height: 22px;"  >iptables -I INPUT -p tcp --dport 1158 -j ACCEPT</div><div style="line-height: 22px;"  >iptables -A INPUT -p tcp --dport 1158 -j ACCEPT</div><div><br></div><div>永久保存</div><div>service iptables save</div><wbr></div>
	</div>
</div>
</body>
</html>